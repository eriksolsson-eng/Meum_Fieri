(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const kn=!1;var nr=Array.isArray,ys=Array.prototype.indexOf,Vr=Array.from,An=Object.defineProperty,Kt=Object.getOwnPropertyDescriptor,Tn=Object.getOwnPropertyDescriptors,bs=Object.prototype,ws=Array.prototype,Yr=Object.getPrototypeOf,an=Object.isExtensible;const qt=()=>{};function Cs(e){return e()}function Rr(e){for(var t=0;t<e.length;t++)e[t]()}function Sn(){var e,t,r=new Promise((n,s)=>{e=n,t=s});return{promise:r,resolve:e,reject:t}}function ks(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const n of e)if(r.push(n),r.length===t)break;return r}const Re=2,mr=4,yr=8,ft=16,dt=32,Et=64,br=128,Ze=512,Ie=1024,Be=2048,vt=4096,je=8192,Ct=16384,zr=32768,Ft=65536,on=1<<17,xn=1<<18,Vt=1<<19,En=1<<20,Zt=32768,Nr=1<<21,Hr=1<<22,ht=1<<23,kt=Symbol("$state"),As=Symbol(""),Mt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ts(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ss(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function xs(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Es(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function $s(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ps(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Is(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ds(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Rs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ns(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const wr=1,Cr=2,$n=4,Ms=8,Os=16,Ls=1,qs=2,Pe=Symbol(),Bs="http://www.w3.org/1999/xhtml";function Fs(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Us(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Gs=!1;function Pn(e){return e===this.v}function In(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Dn(e){return!In(e,this.v)}let kr=!1,js=!1;function Vs(){kr=!0}let Se=null;function Ut(e){Se=e}function Ye(e,t=!1,r){Se={p:Se,i:!1,c:null,e:null,s:e,x:null,l:kr&&!t?{s:null,u:null,$:[]}:null}}function ze(e){var t=Se,r=t.e;if(r!==null){t.e=null;for(var n of r)Hn(n)}return t.i=!0,Se=t.p,{}}function sr(){return!kr||Se!==null&&Se.l===null}let Ot=[];function Ys(){var e=Ot;Ot=[],Rr(e)}function ir(e){if(Ot.length===0){var t=Ot;queueMicrotask(()=>{t===Ot&&Ys()})}Ot.push(e)}function Rn(e){var t=de;if(t===null)return ae.f|=ht,e;if((t.f&zr)===0){if((t.f&br)===0)throw e;t.b.error(e)}else Gt(e,t)}function Gt(e,t){for(;t!==null;){if((t.f&br)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const fr=new Set;let me=null,_r=null,Ge=null,_t=[],Wr=null,Mr=!1;class rt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#o=null;#l=[];#a=[];skipped_effects=new Set;is_fork=!1;process(t){_t=[],_r=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const n of t)this.#s(n,r);this.is_fork||this.#c(),this.#n>0||this.is_fork?(this.#i(r.effects),this.#i(r.render_effects),this.#i(r.block_effects)):(_r=this,me=null,cn(r.render_effects),cn(r.effects),_r=null,this.#o?.resolve()),Ge=null}#s(t,r){t.f^=Ie;for(var n=t.first;n!==null;){var s=n.f,i=(s&(dt|Et))!==0,a=i&&(s&Ie)!==0,o=a||(s&je)!==0||this.skipped_effects.has(n);if((n.f&br)!==0&&n.b?.is_pending()&&(r={parent:r,effect:n,effects:[],render_effects:[],block_effects:[]}),!o&&n.fn!==null){i?n.f^=Ie:(s&mr)!==0?r.effects.push(n):ar(n)&&((n.f&ft)!==0&&r.block_effects.push(n),er(n));var u=n.first;if(u!==null){n=u;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)c===r.effect&&(this.#i(r.effects),this.#i(r.render_effects),this.#i(r.block_effects),r=r.parent),n=c.next,c=c.parent}}#i(t){for(const r of t)((r.f&Be)!==0?this.#l:this.#a).push(r),De(r,Ie)}capture(t,r){this.previous.has(t)||this.previous.set(t,r),(t.f&ht)===0&&(this.current.set(t,t.v),Ge?.set(t,t.v))}activate(){me=this,this.apply()}deactivate(){me===this&&(me=null,Ge=null)}flush(){if(this.activate(),_t.length>0){if(zs(),me!==null&&me!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#c(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#u()}#u(){if(fr.size>1){this.previous.clear();var t=Ge,r=!0,n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of fr){if(s===this){r=!1;continue}const i=[];for(const[o,u]of this.current){if(s.current.has(o))if(r&&u!==s.current.get(o))s.current.set(o,u);else continue;i.push(o)}if(i.length===0)continue;const a=[...s.current.keys()].filter(o=>!this.current.has(o));if(a.length>0){const o=new Set,u=new Map;for(const c of i)Nn(c,a,o,u);if(_t.length>0){me=s,s.apply();for(const c of _t)s.#s(c,n);_t=[],s.deactivate()}}}me=null,Ge=t}this.committed=!0,fr.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#l)De(t,Be),St(t);for(const t of this.#a)De(t,vt),St(t);this.#l=[],this.#a=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#o??=Sn()).promise}static ensure(){if(me===null){const t=me=new rt;fr.add(me),rt.enqueue(()=>{me===t&&t.flush()})}return me}static enqueue(t){ir(t)}apply(){}}function zs(){var e=At;Mr=!0;try{var t=0;for(vn(!0);_t.length>0;){var r=rt.ensure();if(t++>1e3){var n,s;Hs()}r.process(_t),gt.clear()}}finally{Mr=!1,vn(e),Wr=null}}function Hs(){try{Ps()}catch(e){Gt(e,Wr)}}let ot=null;function cn(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Ct|je))===0&&ar(n)&&(ot=new Set,er(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?Xn(n):n.fn=null),ot?.size>0)){gt.clear();for(const s of ot){if((s.f&(Ct|je))!==0)continue;const i=[s];let a=s.parent;for(;a!==null;)ot.has(a)&&(ot.delete(a),i.push(a)),a=a.parent;for(let o=i.length-1;o>=0;o--){const u=i[o];(u.f&(Ct|je))===0&&er(u)}}ot.clear()}}ot=null}}function Nn(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const s of e.reactions){const i=s.f;(i&Re)!==0?Nn(s,t,r,n):(i&(Hr|ft))!==0&&(i&Be)===0&&Mn(s,t,n)&&(De(s,Be),St(s))}}function Mn(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&Re)!==0&&Mn(s,t,r))return r.set(s,!0),!0}return r.set(e,!1),!1}function St(e){for(var t=Wr=e;t.parent!==null;){t=t.parent;var r=t.f;if(Mr&&t===de&&(r&ft)!==0&&(r&xn)===0)return;if((r&(Et|dt))!==0){if((r&Ie)===0)return;t.f^=Ie}}_t.push(t)}function Ws(e){let t=0,r=xt(0),n;return()=>{Sr()&&(l(r),vi(()=>(t===0&&(n=Jr(()=>e(()=>Qt(r)))),t+=1,()=>{ir(()=>{t-=1,t===0&&(n?.(),n=void 0,Qt(r))})})))}}var Ks=Ft|Vt|br;function Qs(e,t,r){new Xs(e,t,r)}class Xs{parent;#e=!1;#t;#r=null;#n;#o;#l;#a=null;#s=null;#i=null;#c=null;#u=null;#v=0;#f=0;#_=!1;#d=null;#y=Ws(()=>(this.#d=xt(this.#v),()=>{this.#d=null}));constructor(t,r,n){this.#t=t,this.#n=r,this.#o=n,this.parent=de.b,this.#e=!!this.#n.pending,this.#l=Qr(()=>{de.b=this;{var s=this.#g();try{this.#a=Xe(()=>n(s))}catch(i){this.error(i)}this.#f>0?this.#h():this.#e=!1}return()=>{this.#u?.remove()}},Ks)}#b(){try{this.#a=Xe(()=>this.#o(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#n.pending;t&&(this.#s=Xe(()=>t(this.#t)),rt.enqueue(()=>{var r=this.#g();this.#a=this.#p(()=>(rt.ensure(),Xe(()=>this.#o(r)))),this.#f>0?this.#h():(Bt(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#u=bt(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var r=de,n=ae,s=Se;st(this.#l),qe(this.#l),Ut(this.#l.ctx);try{return t()}catch(i){return Rn(i),null}finally{st(r),qe(n),Ut(s)}}#h(){const t=this.#n.pending;this.#a!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),es(this.#a,this.#c)),this.#s===null&&(this.#s=Xe(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#f+=t,this.#f===0&&(this.#e=!1,this.#s&&Bt(this.#s,()=>{this.#s=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#m(t),this.#v+=t,this.#d&&jt(this.#d,this.#v)}get_effect_pending(){return this.#y(),l(this.#d)}error(t){var r=this.#n.onerror;let n=this.#n.failed;if(this.#_||!r&&!n)throw t;this.#a&&(Me(this.#a),this.#a=null),this.#s&&(Me(this.#s),this.#s=null),this.#i&&(Me(this.#i),this.#i=null);var s=!1,i=!1;const a=()=>{if(s){Us();return}s=!0,i&&Ns(),rt.ensure(),this.#v=0,this.#i!==null&&Bt(this.#i,()=>{this.#i=null}),this.#e=this.has_pending_snippet(),this.#a=this.#p(()=>(this.#_=!1,Xe(()=>this.#o(this.#t)))),this.#f>0?this.#h():this.#e=!1};var o=ae;try{qe(null),i=!0,r?.(t,a),i=!1}catch(u){Gt(u,this.#l&&this.#l.parent)}finally{qe(o)}n&&ir(()=>{this.#i=this.#p(()=>{rt.ensure(),this.#_=!0;try{return Xe(()=>{n(this.#t,()=>t,()=>a)})}catch(u){return Gt(u,this.#l.parent),null}finally{this.#_=!1}})})}}function Zs(e,t,r,n){const s=sr()?Ar:On;if(r.length===0&&e.length===0){n(t.map(s));return}var i=me,a=de,o=Js();function u(){Promise.all(r.map(c=>ei(c))).then(c=>{o();try{n([...t.map(s),...c])}catch(v){(a.f&Ct)===0&&Gt(v,a)}i?.deactivate(),hr()}).catch(c=>{Gt(c,a)})}e.length>0?Promise.all(e).then(()=>{o();try{return u()}finally{i?.deactivate(),hr()}}):u()}function Js(){var e=de,t=ae,r=Se,n=me;return function(i=!0){st(e),qe(t),Ut(r),i&&n?.activate()}}function hr(){st(null),qe(null),Ut(null)}function Ar(e){var t=Re|Be,r=ae!==null&&(ae.f&Re)!==0?ae:null;return de!==null&&(de.f|=Vt),{ctx:Se,deps:null,effects:null,equals:Pn,f:t,fn:e,reactions:null,rv:0,v:Pe,wv:0,parent:r??de,ac:null}}function ei(e,t){let r=de;r===null&&Ss();var n=r.b,s=void 0,i=xt(Pe),a=!ae,o=new Map;return di(()=>{var u=Sn();s=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{c===me&&c.committed&&c.deactivate(),hr()})}catch(d){u.reject(d),hr()}var c=me;if(a){var v=!n.is_pending();n.update_pending_count(1),c.increment(v),o.get(c)?.reject(Mt),o.delete(c),o.set(c,u)}const h=(d,f=void 0)=>{if(c.activate(),f)f!==Mt&&(i.f|=ht,jt(i,f));else{(i.f&ht)!==0&&(i.f^=ht),jt(i,d);for(const[_,C]of o){if(o.delete(_),_===c)break;C.reject(Mt)}}a&&(n.update_pending_count(-1),c.decrement(v))};u.promise.then(h,d=>h(null,d||"unknown"))}),xr(()=>{for(const u of o.values())u.reject(Mt)}),new Promise(u=>{function c(v){function h(){v===s?u(i):c(s)}v.then(h,h)}c(s)})}function F(e){const t=Ar(e);return ts(t),t}function On(e){const t=Ar(e);return t.equals=Dn,t}function Ln(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Me(t[r])}}function ti(e){for(var t=e.parent;t!==null;){if((t.f&Re)===0)return t;t=t.parent}return null}function Kr(e){var t,r=de;st(ti(e));try{e.f&=~Zt,Ln(e),t=is(e)}finally{st(r)}return t}function qn(e){var t=Kr(e);if(e.equals(t)||(e.v=t,e.wv=ns()),!Yt)if(Ge!==null)Sr()&&Ge.set(e,e.v);else{var r=(e.f&Ze)===0?vt:Ie;De(e,r)}}let Or=new Set;const gt=new Map;let Bn=!1;function xt(e,t){var r={f:0,v:e,reactions:null,equals:Pn,rv:0,wv:0};return r}function ue(e,t){const r=xt(e);return ts(r),r}function Fn(e,t=!1,r=!0){const n=xt(e);return t||(n.equals=Dn),kr&&r&&Se!==null&&Se.l!==null&&(Se.l.s??=[]).push(n),n}function m(e,t,r=!1){ae!==null&&(!nt||(ae.f&on)!==0)&&sr()&&(ae.f&(Re|ft|Hr|on))!==0&&!ct?.includes(e)&&Rs();let n=r?Lt(t):t;return jt(e,n)}function jt(e,t){if(!e.equals(t)){var r=e.v;Yt?gt.set(e,t):gt.set(e,r),e.v=t;var n=rt.ensure();n.capture(e,r),(e.f&Re)!==0&&((e.f&Be)!==0&&Kr(e),De(e,(e.f&Ze)!==0?Ie:vt)),e.wv=ns(),Un(e,Be),sr()&&de!==null&&(de.f&Ie)!==0&&(de.f&(dt|Et))===0&&(He===null?pi([e]):He.push(e)),!n.is_fork&&Or.size>0&&!Bn&&ri()}return t}function ri(){Bn=!1;const e=Array.from(Or);for(const t of e)(t.f&Ie)!==0&&De(t,vt),ar(t)&&er(t);Or.clear()}function Qt(e){m(e,e.v+1)}function Un(e,t){var r=e.reactions;if(r!==null)for(var n=sr(),s=r.length,i=0;i<s;i++){var a=r[i],o=a.f;if(!(!n&&a===de)){var u=(o&Be)===0;if(u&&De(a,t),(o&Re)!==0){var c=a;Ge?.delete(c),(o&Zt)===0&&(o&Ze&&(a.f|=Zt),Un(c,vt))}else u&&((o&ft)!==0&&ot!==null&&ot.add(a),St(a))}}}function Lt(e){if(typeof e!="object"||e===null||kt in e)return e;const t=Yr(e);if(t!==bs&&t!==ws)return e;var r=new Map,n=nr(e),s=ue(0),i=Tt,a=o=>{if(Tt===i)return o();var u=ae,c=Tt;qe(null),pn(i);var v=o();return qe(u),pn(c),v};return n&&r.set("length",ue(e.length)),new Proxy(e,{defineProperty(o,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Is();var v=r.get(u);return v===void 0?v=a(()=>{var h=ue(c.value);return r.set(u,h),h}):m(v,c.value,!0),!0},deleteProperty(o,u){var c=r.get(u);if(c===void 0){if(u in o){const v=a(()=>ue(Pe));r.set(u,v),Qt(s)}}else m(c,Pe),Qt(s);return!0},get(o,u,c){if(u===kt)return e;var v=r.get(u),h=u in o;if(v===void 0&&(!h||Kt(o,u)?.writable)&&(v=a(()=>{var f=Lt(h?o[u]:Pe),_=ue(f);return _}),r.set(u,v)),v!==void 0){var d=l(v);return d===Pe?void 0:d}return Reflect.get(o,u,c)},getOwnPropertyDescriptor(o,u){var c=Reflect.getOwnPropertyDescriptor(o,u);if(c&&"value"in c){var v=r.get(u);v&&(c.value=l(v))}else if(c===void 0){var h=r.get(u),d=h?.v;if(h!==void 0&&d!==Pe)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return c},has(o,u){if(u===kt)return!0;var c=r.get(u),v=c!==void 0&&c.v!==Pe||Reflect.has(o,u);if(c!==void 0||de!==null&&(!v||Kt(o,u)?.writable)){c===void 0&&(c=a(()=>{var d=v?Lt(o[u]):Pe,f=ue(d);return f}),r.set(u,c));var h=l(c);if(h===Pe)return!1}return v},set(o,u,c,v){var h=r.get(u),d=u in o;if(n&&u==="length")for(var f=c;f<h.v;f+=1){var _=r.get(f+"");_!==void 0?m(_,Pe):f in o&&(_=a(()=>ue(Pe)),r.set(f+"",_))}if(h===void 0)(!d||Kt(o,u)?.writable)&&(h=a(()=>ue(void 0)),m(h,Lt(c)),r.set(u,h));else{d=h.v!==Pe;var C=a(()=>Lt(c));m(h,C)}var A=Reflect.getOwnPropertyDescriptor(o,u);if(A?.set&&A.set.call(v,c),!d){if(n&&typeof u=="string"){var U=r.get("length"),E=Number(u);Number.isInteger(E)&&E>=U.v&&m(U,E+1)}Qt(s)}return!0},ownKeys(o){l(s);var u=Reflect.ownKeys(o).filter(h=>{var d=r.get(h);return d===void 0||d.v!==Pe});for(var[c,v]of r)v.v!==Pe&&!(c in o)&&u.push(c);return u},setPrototypeOf(){Ds()}})}function un(e){try{if(e!==null&&typeof e=="object"&&kt in e)return e[kt]}catch{}return e}function ni(e,t){return Object.is(un(e),un(t))}var fn,Gn,jn,Vn;function si(){if(fn===void 0){fn=window,Gn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;jn=Kt(t,"firstChild").get,Vn=Kt(t,"nextSibling").get,an(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),an(r)&&(r.__t=void 0)}}function bt(e=""){return document.createTextNode(e)}function pt(e){return jn.call(e)}function lr(e){return Vn.call(e)}function g(e,t){return pt(e)}function le(e,t=!1){{var r=pt(e);return r instanceof Comment&&r.data===""?lr(r):r}}function b(e,t=1,r=!1){let n=e;for(;t--;)n=lr(n);return n}function ii(e){e.textContent=""}function Yn(){return!1}let dn=!1;function li(){dn||(dn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Tr(e){var t=ae,r=de;qe(null),st(null);try{return e()}finally{qe(t),st(r)}}function ai(e,t,r,n=r){e.addEventListener(t,()=>Tr(r));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),li()}function zn(e){de===null&&(ae===null&&$s(),Es()),Yt&&xs()}function oi(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function it(e,t,r,n=!0){var s=de;s!==null&&(s.f&je)!==0&&(e|=je);var i={ctx:Se,deps:null,nodes_start:null,nodes_end:null,f:e|Be|Ze,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{er(i),i.f|=zr}catch(u){throw Me(i),u}else t!==null&&St(i);if(n){var a=i;if(r&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&Vt)===0&&(a=a.first,(e&ft)!==0&&(e&Ft)!==0&&a!==null&&(a.f|=Ft)),a!==null&&(a.parent=s,s!==null&&oi(a,s),ae!==null&&(ae.f&Re)!==0&&(e&Et)===0)){var o=ae;(o.effects??=[]).push(a)}}return i}function Sr(){return ae!==null&&!nt}function xr(e){const t=it(yr,null,!1);return De(t,Ie),t.teardown=e,t}function Lr(e){zn();var t=de.f,r=!ae&&(t&dt)!==0&&(t&zr)===0;if(r){var n=Se;(n.e??=[]).push(e)}else return Hn(e)}function Hn(e){return it(mr|En,e,!1)}function ci(e){return zn(),it(yr|En,e,!0)}function ui(e){rt.ensure();const t=it(Et|Vt,e,!0);return(r={})=>new Promise(n=>{r.outro?Bt(t,()=>{Me(t),n(void 0)}):(Me(t),n(void 0))})}function fi(e){return it(mr,e,!1)}function di(e){return it(Hr|Vt,e,!0)}function vi(e,t=0){return it(yr|t,e,!0)}function Y(e,t=[],r=[],n=[],s=!1){Zs(n,t,r,i=>{it(s?mr:yr,()=>e(...i.map(l)),!0)})}function Qr(e,t=0){var r=it(ft|t,e,!0);return r}function Xe(e,t=!0){return it(dt|Vt,e,!0,t)}function Wn(e){var t=e.teardown;if(t!==null){const r=Yt,n=ae;_n(!0),qe(null);try{t.call(null)}finally{_n(r),qe(n)}}}function Kn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&Tr(()=>{s.abort(Mt)});var n=r.next;(r.f&Et)!==0?r.parent=null:Me(r,t),r=n}}function _i(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&dt)===0&&Me(t),t=r}}function Me(e,t=!0){var r=!1;(t||(e.f&xn)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Qn(e.nodes_start,e.nodes_end),r=!0),Kn(e,t&&!r),gr(e,0),De(e,Ct);var n=e.transitions;if(n!==null)for(const i of n)i.stop();Wn(e);var s=e.parent;s!==null&&s.first!==null&&Xn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Qn(e,t){for(;e!==null;){var r=e===t?null:lr(e);e.remove(),e=r}}function Xn(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Bt(e,t,r=!0){var n=[];Xr(e,n,!0),Zn(n,()=>{r&&Me(e),t&&t()})}function Zn(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var s of e)s.out(n)}else t()}function Xr(e,t,r){if((e.f&je)===0){if(e.f^=je,e.transitions!==null)for(const a of e.transitions)(a.is_global||r)&&t.push(a);for(var n=e.first;n!==null;){var s=n.next,i=(n.f&Ft)!==0||(n.f&dt)!==0&&(e.f&ft)!==0;Xr(n,t,i?r:!1),n=s}}}function Zr(e){Jn(e,!0)}function Jn(e,t){if((e.f&je)!==0){e.f^=je,(e.f&Ie)===0&&(De(e,Be),St(e));for(var r=e.first;r!==null;){var n=r.next,s=(r.f&Ft)!==0||(r.f&dt)!==0;Jn(r,s?t:!1),r=n}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}function es(e,t){for(var r=e.nodes_start,n=e.nodes_end;r!==null;){var s=r===n?null:lr(r);t.append(r),r=s}}let At=!1;function vn(e){At=e}let Yt=!1;function _n(e){Yt=e}let ae=null,nt=!1;function qe(e){ae=e}let de=null;function st(e){de=e}let ct=null;function ts(e){ae!==null&&(ct===null?ct=[e]:ct.push(e))}let Ne=null,Ue=0,He=null;function pi(e){He=e}let rs=1,Jt=0,Tt=Jt;function pn(e){Tt=e}function ns(){return++rs}function ar(e){var t=e.f;if((t&Be)!==0)return!0;if(t&Re&&(e.f&=~Zt),(t&vt)!==0){var r=e.deps;if(r!==null)for(var n=r.length,s=0;s<n;s++){var i=r[s];if(ar(i)&&qn(i),i.wv>e.wv)return!0}(t&Ze)!==0&&Ge===null&&De(e,Ie)}return!1}function ss(e,t,r=!0){var n=e.reactions;if(n!==null&&!ct?.includes(e))for(var s=0;s<n.length;s++){var i=n[s];(i.f&Re)!==0?ss(i,t,!1):t===i&&(r?De(i,Be):(i.f&Ie)!==0&&De(i,vt),St(i))}}function is(e){var t=Ne,r=Ue,n=He,s=ae,i=ct,a=Se,o=nt,u=Tt,c=e.f;Ne=null,Ue=0,He=null,ae=(c&(dt|Et))===0?e:null,ct=null,Ut(e.ctx),nt=!1,Tt=++Jt,e.ac!==null&&(Tr(()=>{e.ac.abort(Mt)}),e.ac=null);try{e.f|=Nr;var v=e.fn,h=v(),d=e.deps;if(Ne!==null){var f;if(gr(e,Ue),d!==null&&Ue>0)for(d.length=Ue+Ne.length,f=0;f<Ne.length;f++)d[Ue+f]=Ne[f];else e.deps=d=Ne;if(At&&Sr()&&(e.f&Ze)!==0)for(f=Ue;f<d.length;f++)(d[f].reactions??=[]).push(e)}else d!==null&&Ue<d.length&&(gr(e,Ue),d.length=Ue);if(sr()&&He!==null&&!nt&&d!==null&&(e.f&(Re|vt|Be))===0)for(f=0;f<He.length;f++)ss(He[f],e);return s!==null&&s!==e&&(Jt++,He!==null&&(n===null?n=He:n.push(...He))),(e.f&ht)!==0&&(e.f^=ht),h}catch(_){return Rn(_)}finally{e.f^=Nr,Ne=t,Ue=r,He=n,ae=s,ct=i,Ut(a),nt=o,Tt=u}}function hi(e,t){let r=t.reactions;if(r!==null){var n=ys.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(t.f&Re)!==0&&(Ne===null||!Ne.includes(t))&&(De(t,vt),(t.f&Ze)!==0&&(t.f^=Ze,t.f&=~Zt),Ln(t),gr(t,0))}function gr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)hi(e,r[n])}function er(e){var t=e.f;if((t&Ct)===0){De(e,Ie);var r=de,n=At;de=e,At=!0;try{(t&ft)!==0?_i(e):Kn(e),Wn(e);var s=is(e);e.teardown=typeof s=="function"?s:null,e.wv=rs;var i;kn&&js&&(e.f&Be)!==0&&e.deps}finally{At=n,de=r}}}function l(e){var t=e.f,r=(t&Re)!==0;if(ae!==null&&!nt){var n=de!==null&&(de.f&Ct)!==0;if(!n&&!ct?.includes(e)){var s=ae.deps;if((ae.f&Nr)!==0)e.rv<Jt&&(e.rv=Jt,Ne===null&&s!==null&&s[Ue]===e?Ue++:Ne===null?Ne=[e]:Ne.includes(e)||Ne.push(e));else{(ae.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[ae]:i.includes(ae)||i.push(ae)}}}if(Yt){if(gt.has(e))return gt.get(e);if(r){var a=e,o=a.v;return((a.f&Ie)===0&&a.reactions!==null||as(a))&&(o=Kr(a)),gt.set(a,o),o}}else if(r){if(a=e,Ge?.has(a))return Ge.get(a);ar(a)&&qn(a),At&&Sr()&&(a.f&Ze)===0&&ls(a)}else if(Ge?.has(e))return Ge.get(e);if((e.f&ht)!==0)throw e.v;return e.v}function ls(e){if(e.deps!==null){e.f^=Ze;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&Re)!==0&&(t.f&Ze)===0&&ls(t)}}function as(e){if(e.v===Pe)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(gt.has(t)||(t.f&Re)!==0&&as(t))return!0;return!1}function Jr(e){var t=nt;try{return nt=!0,e()}finally{nt=t}}const gi=-7169;function De(e,t){e.f=e.f&gi|t}function mi(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(kt in e)qr(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&kt in r&&qr(r)}}}function qr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{qr(e[n],t)}catch{}const r=Yr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Tn(r);for(let s in n){const i=n[s].get;if(i)try{i.call(e)}catch{}}}}}const yi=["touchstart","touchmove"];function bi(e){return yi.includes(e)}const wi=new Set,hn=new Set;function Ci(e,t,r,n={}){function s(i){if(n.capture||Wt.call(t,i),!i.cancelBubble)return Tr(()=>r?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?ir(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function V(e,t,r,n,s){var i={capture:n,passive:s},a=Ci(e,t,r,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&xr(()=>{t.removeEventListener(e,a,i)})}let gn=null;function Wt(e){var t=this,r=t.ownerDocument,n=e.type,s=e.composedPath?.()||[],i=s[0]||e.target;gn=e;var a=0,o=gn===e&&e.__root;if(o){var u=s.indexOf(o);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var c=s.indexOf(t);if(c===-1)return;u<=c&&(a=u)}if(i=s[a]||e.target,i!==t){An(e,"currentTarget",{configurable:!0,get(){return i||r}});var v=ae,h=de;qe(null),st(null);try{for(var d,f=[];i!==null;){var _=i.assignedSlot||i.parentNode||i.host||null;try{var C=i["__"+n];C!=null&&(!i.disabled||e.target===i)&&C.call(i,e)}catch(A){d?f.push(A):d=A}if(e.cancelBubble||_===t||_===null)break;i=_}if(d){for(let A of f)queueMicrotask(()=>{throw A});throw d}}finally{e.__root=t,delete e.currentTarget,qe(v),st(h)}}}function os(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function tr(e,t){var r=de;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function $(e,t){var r=(t&Ls)!==0,n=(t&qs)!==0,s,i=!e.startsWith("<!>");return()=>{s===void 0&&(s=os(i?e:"<!>"+e),r||(s=pt(s)));var a=n||Gn?document.importNode(s,!0):s.cloneNode(!0);if(r){var o=pt(a),u=a.lastChild;tr(o,u)}else tr(a,a);return a}}function et(e=""){{var t=bt(e+"");return tr(t,t),t}}function Te(){var e=document.createDocumentFragment(),t=document.createComment(""),r=bt();return e.append(t,r),tr(t,r),e}function y(e,t){e!==null&&e.before(t)}function Q(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function ki(e,t){return Ai(e,t)}const Rt=new Map;function Ai(e,{target:t,anchor:r,props:n={},events:s,context:i,intro:a=!0}){si();var o=new Set,u=h=>{for(var d=0;d<h.length;d++){var f=h[d];if(!o.has(f)){o.add(f);var _=bi(f);t.addEventListener(f,Wt,{passive:_});var C=Rt.get(f);C===void 0?(document.addEventListener(f,Wt,{passive:_}),Rt.set(f,1)):Rt.set(f,C+1)}}};u(Vr(wi)),hn.add(u);var c=void 0,v=ui(()=>{var h=r??t.appendChild(bt());return Qs(h,{pending:()=>{}},d=>{if(i){Ye({});var f=Se;f.c=i}s&&(n.$$events=s),c=e(d,n)||{},i&&ze()}),()=>{for(var d of o){t.removeEventListener(d,Wt);var f=Rt.get(d);--f===0?(document.removeEventListener(d,Wt),Rt.delete(d)):Rt.set(d,f)}hn.delete(u),h!==r&&h.parentNode?.removeChild(h)}});return Ti.set(c,v),c}let Ti=new WeakMap;class Si{anchor;#e=new Map;#t=new Map;#r=new Map;#n=!0;constructor(t,r=!0){this.anchor=t,this.#n=r}#o=()=>{var t=me;if(this.#e.has(t)){var r=this.#e.get(t),n=this.#t.get(r);if(n)Zr(n);else{var s=this.#r.get(r);s&&(this.#t.set(r,s.effect),this.#r.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[i,a]of this.#e){if(this.#e.delete(i),i===t)break;const o=this.#r.get(a);o&&(Me(o.effect),this.#r.delete(a))}for(const[i,a]of this.#t){if(i===r)continue;const o=()=>{if(Array.from(this.#e.values()).includes(i)){var c=document.createDocumentFragment();es(a,c),c.append(bt()),this.#r.set(i,{effect:a,fragment:c})}else Me(a);this.#t.delete(i)};this.#n||!n?Bt(a,o,!1):o()}}};#l=t=>{this.#e.delete(t);const r=Array.from(this.#e.values());for(const[n,s]of this.#r)r.includes(n)||(Me(s.effect),this.#r.delete(n))};ensure(t,r){var n=me,s=Yn();if(r&&!this.#t.has(t)&&!this.#r.has(t))if(s){var i=document.createDocumentFragment(),a=bt();i.append(a),this.#r.set(t,{effect:Xe(()=>r(a)),fragment:i})}else this.#t.set(t,Xe(()=>r(this.anchor)));if(this.#e.set(n,t),s){for(const[o,u]of this.#t)o===t?n.skipped_effects.delete(u):n.skipped_effects.add(u);for(const[o,u]of this.#r)o===t?n.skipped_effects.delete(u.effect):n.skipped_effects.add(u.effect);n.oncommit(this.#o),n.ondiscard(this.#l)}else this.#o()}}function H(e,t,r=!1){var n=new Si(e),s=r?Ft:0;function i(a,o){n.ensure(a,o)}Qr(()=>{var a=!1;t((o,u=!0)=>{a=!0,i(u,o)}),a||i(!1,null)},s)}function we(e,t){return t}function xi(e,t,r){for(var n=e.items,s=[],i=t.length,a=0;a<i;a++)Xr(t[a].e,s,!0);var o=i>0&&s.length===0&&r!==null;if(o){var u=r.parentNode;ii(u),u.append(r),n.clear(),tt(e,t[0].prev,t[i-1].next)}Zn(s,()=>{for(var c=0;c<i;c++){var v=t[c];o||(n.delete(v.k),tt(e,v.prev,v.next)),Me(v.e,!o)}})}function Ce(e,t,r,n,s,i=null){var a=e,o={flags:t,items:new Map,first:null},u=(t&$n)!==0;if(u){var c=e;a=c.appendChild(bt())}var v=null,h=!1,d=new Map,f=On(()=>{var U=r();return nr(U)?U:U==null?[]:Vr(U)}),_,C;function A(){Ei(C,_,o,d,a,s,t,n,r),i!==null&&(_.length===0?v?Zr(v):v=Xe(()=>i(a)):v!==null&&Bt(v,()=>{v=null}))}Qr(()=>{C??=de,_=l(f);var U=_.length;if(!(h&&U===0)){h=U===0;var E,R,J,X;if(Yn()){var D=new Set,x=me;for(R=0;R<U;R+=1){J=_[R],X=n(J,R);var B=o.items.get(X)??d.get(X);B?(t&(wr|Cr))!==0&&cs(B,J,R,t):(E=us(null,o,null,null,J,X,R,s,t,r,!0),d.set(X,E)),D.add(X)}for(const[j,W]of o.items)D.has(j)||x.skipped_effects.add(W.e);x.oncommit(A)}else A();l(f)}})}function Ei(e,t,r,n,s,i,a,o,u){var c=(a&Ms)!==0,v=(a&(wr|Cr))!==0,h=t.length,d=r.items,f=r.first,_=f,C,A=null,U,E=[],R=[],J,X,D,x;if(c)for(x=0;x<h;x+=1)J=t[x],X=o(J,x),D=d.get(X),D!==void 0&&(D.a?.measure(),(U??=new Set).add(D));for(x=0;x<h;x+=1){if(J=t[x],X=o(J,x),D=d.get(X),D===void 0){var B=n.get(X);if(B!==void 0){n.delete(X),d.set(X,B);var j=A?A.next:_;tt(r,A,B),tt(r,B,j),Ir(B,j,s),A=B}else{var W=_?_.e.nodes_start:s;A=us(W,r,A,A===null?r.first:A.next,J,X,x,i,a,u)}d.set(X,A),E=[],R=[],_=A.next;continue}if(v&&cs(D,J,x,a),(D.e.f&je)!==0&&(Zr(D.e),c&&(D.a?.unfix(),(U??=new Set).delete(D))),D!==_){if(C!==void 0&&C.has(D)){if(E.length<R.length){var K=R[0],w;A=K.prev;var N=E[0],L=E[E.length-1];for(w=0;w<E.length;w+=1)Ir(E[w],K,s);for(w=0;w<R.length;w+=1)C.delete(R[w]);tt(r,N.prev,L.next),tt(r,A,N),tt(r,L,K),_=K,A=L,x-=1,E=[],R=[]}else C.delete(D),Ir(D,_,s),tt(r,D.prev,D.next),tt(r,D,A===null?r.first:A.next),tt(r,A,D),A=D;continue}for(E=[],R=[];_!==null&&_.k!==X;)(_.e.f&je)===0&&(C??=new Set).add(_),R.push(_),_=_.next;if(_===null)continue;D=_}E.push(D),A=D,_=D.next}if(_!==null||C!==void 0){for(var se=C===void 0?[]:Vr(C);_!==null;)(_.e.f&je)===0&&se.push(_),_=_.next;var he=se.length;if(he>0){var $e=(a&$n)!==0&&h===0?s:null;if(c){for(x=0;x<he;x+=1)se[x].a?.measure();for(x=0;x<he;x+=1)se[x].a?.fix()}xi(r,se,$e)}}c&&ir(()=>{if(U!==void 0)for(D of U)D.a?.apply()}),e.first=r.first&&r.first.e,e.last=A&&A.e;for(var fe of n.values())Me(fe.e);n.clear()}function cs(e,t,r,n){(n&wr)!==0&&jt(e.v,t),(n&Cr)!==0?jt(e.i,r):e.i=r}function us(e,t,r,n,s,i,a,o,u,c,v){var h=(u&wr)!==0,d=(u&Os)===0,f=h?d?Fn(s,!1,!1):xt(s):s,_=(u&Cr)===0?a:xt(a),C={i:_,v:f,k:i,a:null,e:null,prev:r,next:n};try{if(e===null){var A=document.createDocumentFragment();A.append(e=bt())}return C.e=Xe(()=>o(e,f,_,c),Gs),C.e.prev=r&&r.e,C.e.next=n&&n.e,r===null?v||(t.first=C):(r.next=C,r.e.next=C.e),n!==null&&(n.prev=C,n.e.prev=C.e),C}finally{}}function Ir(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,s=t?t.e.nodes_start:r,i=e.e.nodes_start;i!==null&&i!==n;){var a=lr(i);s.before(i),i=a}}function tt(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function $i(e,t,r=!1,n=!1,s=!1){var i=e,a="";Y(()=>{var o=de;if(a!==(a=t()??"")&&(o.nodes_start!==null&&(Qn(o.nodes_start,o.nodes_end),o.nodes_start=o.nodes_end=null),a!=="")){var u=a+"";r?u=`<svg>${u}</svg>`:n&&(u=`<math>${u}</math>`);var c=os(u);if((r||n)&&(c=pt(c)),tr(pt(c),c.lastChild),r||n)for(;pt(c);)i.before(pt(c));else i.before(c)}})}const mn=[...` 	
\r\f \v\uFEFF`];function Pi(e,t,r){var n=e==null?"":""+e;if(r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var i=s.length,a=0;(a=n.indexOf(s,a))>=0;){var o=a+i;(a===0||mn.includes(n[a-1]))&&(o===n.length||mn.includes(n[o]))?n=(a===0?"":n.substring(0,a))+n.substring(o+1):a=o}}return n===""?null:n}function Ii(e,t){return e==null?null:String(e)}function ut(e,t,r,n,s,i){var a=e.__className;if(a!==r||a===void 0){var o=Pi(r,n,i);o==null?e.removeAttribute("class"):e.className=o,e.__className=r}else if(i&&s!==i)for(var u in i){var c=!!i[u];(s==null||c!==!!s[u])&&e.classList.toggle(u,c)}return i}function Ke(e,t,r,n){var s=e.__style;if(s!==t){var i=Ii(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return n}function fs(e,t,r=!1){if(e.multiple){if(t==null)return;if(!nr(t))return Fs();for(var n of e.options)n.selected=t.includes(Xt(n));return}for(n of e.options){var s=Xt(n);if(ni(s,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Di(e){var t=new MutationObserver(()=>{fs(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),xr(()=>{t.disconnect()})}function Ri(e,t,r=t){var n=new WeakSet,s=!0;ai(e,"change",i=>{var a=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(a),Xt);else{var u=e.querySelector(a)??e.querySelector("option:not([disabled])");o=u&&Xt(u)}r(o),me!==null&&n.add(me)}),fi(()=>{var i=t();if(e===document.activeElement){var a=_r??me;if(n.has(a))return}if(fs(e,i,s),s&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=Xt(o),r(i))}e.__value=i,s=!1}),Di(e)}function Xt(e){return"__value"in e?e.__value:e.value}const Ni=Symbol("is custom element"),Mi=Symbol("is html");function oe(e,t,r,n){var s=Oi(e);s[t]!==(s[t]=r)&&(t==="loading"&&(e[As]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Li(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Oi(e){return e.__attributes??={[Ni]:e.nodeName.includes("-"),[Mi]:e.namespaceURI===Bs}}var yn=new Map;function Li(e){var t=e.getAttribute("is")||e.nodeName,r=yn.get(t);if(r)return r;yn.set(t,r=[]);for(var n,s=e,i=Element.prototype;i!==s;){n=Tn(s);for(var a in n)n[a].set&&r.push(a);s=Yr(s)}return r}function mt(e){return function(...t){var r=t[0];return r.stopPropagation(),e?.apply(this,t)}}function ds(e=!1){const t=Se,r=t.l.u;if(!r)return;let n=()=>mi(t.s);if(e){let s=0,i={};const a=Ar(()=>{let o=!1;const u=t.s;for(const c in u)u[c]!==i[c]&&(i[c]=u[c],o=!0);return o&&s++,s});n=()=>l(a)}r.b.length&&ci(()=>{bn(t,n),Rr(r.b)}),Lr(()=>{const s=Jr(()=>r.m.map(Cs));return()=>{for(const i of s)typeof i=="function"&&i()}}),r.a.length&&Lr(()=>{bn(t,n),Rr(r.a)})}function bn(e,t){if(e.l.s)for(const r of e.l.s)l(r);t()}function yt(e,t){var r=e.$$events?.[t.type],n=nr(r)?r.slice():r==null?[]:[r];for(var s of n)s.call(this,t)}function vs(e,t,r){if(e==null)return t(void 0),qt;const n=Jr(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const Nt=[];function qi(e,t=qt){let r=null;const n=new Set;function s(o){if(In(e,o)&&(e=o,r)){const u=!Nt.length;for(const c of n)c[1](),Nt.push(c,e);if(u){for(let c=0;c<Nt.length;c+=2)Nt[c][0](Nt[c+1]);Nt.length=0}}}function i(o){s(o(e))}function a(o,u=qt){const c=[o,u];return n.add(c),n.size===1&&(r=t(s,i)||qt),o(e),()=>{n.delete(c),n.size===0&&r&&(r(),r=null)}}return{set:s,update:i,subscribe:a}}function Bi(e){let t;return vs(e,r=>t=r)(),t}let Br=Symbol();function $t(e,t,r){const n=r[t]??={store:null,source:Fn(void 0),unsubscribe:qt};if(n.store!==e&&!(Br in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=qt;else{var s=!0;n.unsubscribe=vs(e,i=>{s?n.source.v=i:m(n.source,i)}),s=!1}return e&&Br in r?Bi(e):l(n.source)}function Pt(){const e={};function t(){xr(()=>{for(var r in e)e[r].unsubscribe();An(e,Br,{enumerable:!1,value:!0})})}return[e,t]}function We(e,t,r,n){var s=n,i=!0,a=()=>(i&&(i=!1,s=n),s),o;o=e[t],o===void 0&&n!==void 0&&(o=a());var u;return u=()=>{var c=e[t];return c===void 0?a():(i=!0,c)},u}function Fi(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function Er(){const e=Se;return e===null&&Ts(),(t,r,n)=>{const s=e.s.$$events?.[t];if(s){const i=nr(s)?s.slice():[s],a=Fi(t,r,n);for(const o of i)o.call(e.x,a);return!a.defaultPrevented}return!0}}const Ui="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ui);Vs();const Ve={TierNames:{1:"Tier 1",2:"Tier 2",3:"Tier 3",4:"Tier 4"},CategoryNames:{1:"Art",2:"Vehicles",3:"Garments",4:"Perishables",5:"Debaucheries"},PlayerColors:{1:"red",2:"yellow",3:"green",4:"blue"},ColorNames:{red:"Red",yellow:"Yellow",green:"Green",blue:"Blue"},ColorTints:{red:"rgba(220, 53, 69, 0.15)",yellow:"rgba(255, 193, 7, 0.15)",green:"rgba(40, 167, 69, 0.15)",blue:"rgba(0, 123, 255, 0.15)"},ColorBorders:{red:"#dc3545",yellow:"#ffc107",green:"#28a745",blue:"#007bff"},TierValue:{1:1,2:2,3:4,4:8},TrackPoints:[2,2,2,2,2,2,1,1,1,1],cardBacks:{1:"./Card_backs/t1_back.png",2:"./Card_backs/t2_back.png",3:"./Card_backs/t3_back.png",4:"./Card_backs/t4_back.png"},actionImages:{1:["./Action_cards/p1_red_ac1.png","./Action_cards/p1_red_ac2.png","./Action_cards/p1_red_ac3.png","./Action_cards/p1_red_ac4.png"],2:["./Action_cards/p2_yellow_ac1.png","./Action_cards/p2_yellow_ac2.png","./Action_cards/p2_yellow_ac3.png","./Action_cards/p2_yellow_ac4.png"],3:["./Action_cards/p3_green_ac1.png","./Action_cards/p3_green_ac2.png","./Action_cards/p3_green_ac3.png","./Action_cards/p3_green_ac4.png"],4:["./Action_cards/p4_blue_ac1.png","./Action_cards/p4_blue_ac2.png","./Action_cards/p4_blue_ac3.png","./Action_cards/p4_blue_ac4.png"]},actionTypeIndex:{status:0,destruction:1,competitive:2,potlatch:3},assetFiles:["./Asset_Cards/01_t04_c01.png","./Asset_Cards/02_t04_c01.png","./Asset_Cards/03_t04_c01.png","./Asset_Cards/04_t04_c02.png","./Asset_Cards/05_t04_c02.png","./Asset_Cards/06_t04_c02.png","./Asset_Cards/07_t04_c05.png","./Asset_Cards/08_t04_c05.png","./Asset_Cards/09_t04_c05.png","./Asset_Cards/10_t03_c01.png","./Asset_Cards/11_t03_c01.png","./Asset_Cards/12_t03_c01.png","./Asset_Cards/13_t03_c01.png","./Asset_Cards/14_t03_c02.png","./Asset_Cards/15_t03_c02.png","./Asset_Cards/16_t03_c02.png","./Asset_Cards/17_t03_c02.png","./Asset_Cards/18_t03_c03.png","./Asset_Cards/19_t03_c03.png","./Asset_Cards/20_t03_c03.png","./Asset_Cards/21_t03_c03.png","./Asset_Cards/22_t03_c05.png","./Asset_Cards/23_t03_c05.png","./Asset_Cards/24_t02_c01.png","./Asset_Cards/25_t02_c01.png","./Asset_Cards/26_t02_c01.png","./Asset_Cards/27_t02_c01.png","./Asset_Cards/28_t02_c02.png","./Asset_Cards/29_t02_c02.png","./Asset_Cards/30_t02_c02.png","./Asset_Cards/31_t02_c02.png","./Asset_Cards/32_t02_c03.png","./Asset_Cards/33_t02_c03.png","./Asset_Cards/34_t02_c03.png","./Asset_Cards/35_t02_c03.png","./Asset_Cards/36_t02_c04.png","./Asset_Cards/37_t02_c04.png","./Asset_Cards/38_t02_c04.png","./Asset_Cards/39_t02_c04.png","./Asset_Cards/40_t02_c05.png","./Asset_Cards/41_t01_c01.png","./Asset_Cards/42_t01_c01.png","./Asset_Cards/43_t01_c01.png","./Asset_Cards/44_t01_c01.png","./Asset_Cards/45_t01_c01.png","./Asset_Cards/46_t01_c02.png","./Asset_Cards/47_t01_c02.png","./Asset_Cards/48_t01_c02.png","./Asset_Cards/49_t01_c02.png","./Asset_Cards/50_t01_c02.png","./Asset_Cards/51_t01_c03.png","./Asset_Cards/52_t01_c03.png","./Asset_Cards/53_t01_c03.png","./Asset_Cards/54_t01_c03.png","./Asset_Cards/55_t01_c03.png","./Asset_Cards/56_t01_c04.png","./Asset_Cards/57_t01_c04.png","./Asset_Cards/58_t01_c04.png","./Asset_Cards/59_t01_c04.png","./Asset_Cards/60_t01_c04.png"]};function Gi(e){const t=e.match(/(\d+)_t0?(\d)_c0?(\d)\.png$/);if(!t)return console.error("Failed to parse asset file:",e),{id:e,tier:1,category:1,value:1,faceUp:!1};const r=Number(t[2]),n=Number(t[3]);return{id:e,tier:r,category:n,value:Ve.TierValue[r],faceUp:!1}}function dr(e){const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}function or(e){const t={1:0,2:0,3:0,4:0};return e.hoard.forEach(r=>{r.tier&&t[r.tier]++}),t}function Fr(e,t){let r=0,n=null,s=!1;return e.forEach(i=>{if(i.collectionCategory===t){const a=i.collection.filter(o=>o.category===t);if(a.length>=3){const o=a.reduce((u,c)=>u+c.value,0);o>r?(r=o,n=i.id,s=!1):o===r&&(s=!0)}}}),s?null:n}function wn(e){let t=0,r=null,n=!1;return e.forEach(s=>{s.points>t?(t=s.points,r=s.id,n=!1):s.points===t&&(n=!0)}),{winnerId:n?null:r,maxPoints:t,tie:n}}function _s(e){const t=or(e),r=[];return t[4]>=2?[1,2,3,4]:(r.push(1),(t[1]>=2||t[2]>=2)&&r.push(2),(t[2]>=2||t[3]>=2)&&r.push(3),t[3]>=2&&r.push(4),r)}let rr=1;function ji(){const{subscribe:e,set:t,update:r}=qi({players:[],piles:{1:[],2:[],3:[],4:[]},open:{1:null,2:null,3:null,4:null},currentPlayer:0,track:[],actionTypePlays:{status:0,destruction:0,competitive:0,potlatch:0},minRequiredByType:{status:0,destruction:0,competitive:0,potlatch:0},pioneerByType:{status:null,destruction:null,competitive:null,potlatch:null},uiSelection:{hoardIndex:null,selectedActionCards:[]},waitingForHumanAck:!1,turnState:{hasDrawn:!1,hasActed:!1,hasMovedToCollection:!1},competitiveLastTier:{},aiTurnReport:"",lastActionCards:[],humanId:1,gameStarted:!1});return{subscribe:e,setupGame:(n,s=1)=>r(i=>{rr=s,i.humanId=s;const a={1:[],2:[],3:[],4:[]};Ve.assetFiles.forEach(u=>{const c=Gi(u);a[c.tier].push(c)}),i.piles[1]=dr(a[1]),i.piles[2]=dr(a[2]),i.piles[3]=dr(a[3]),i.piles[4]=dr(a[4]);const{PlayerColors:o}=Ve;i.players=Array.from({length:n},(u,c)=>({id:c+1,color:o[c+1],points:0,pointsLog:[],hoard:[],collection:[],collectionCategory:null,actionsUsed:{status:!1,destruction:!1,competitive:!1,potlatch:!1},lastTurnSummary:""}));for(let u=0;u<n;u++)Dr(i,1,!0,i.players[u]),Dr(i,1,!0,i.players[u]);return Cn(i,1),Cn(i,2),i.gameStarted=!0,i.currentPlayer=s-1,i.turnState={hasDrawn:!1,hasActed:!1,hasMovedToCollection:!1},i}),resetGame:()=>{rr=1,t({players:[],piles:{1:[],2:[],3:[],4:[]},open:{1:null,2:null,3:null,4:null},currentPlayer:0,track:[],actionTypePlays:{status:0,destruction:0,competitive:0,potlatch:0},minRequiredByType:{status:0,destruction:0,competitive:0,potlatch:0},pioneerByType:{status:null,destruction:null,competitive:null,potlatch:null},uiSelection:{hoardIndex:null,selectedActionCards:[]},waitingForHumanAck:!1,turnState:{hasDrawn:!1,hasActed:!1,hasMovedToCollection:!1},competitiveLastTier:{},aiTurnReport:"",lastActionCards:[],humanId:1,gameStarted:!1})},drawCard:(n,s)=>r(i=>{const a=i.currentPlayer,o=i.players[a];return Dr(i,n,s,o)&&(i.turnState.hasDrawn=!0,i.players=i.players.map((c,v)=>v===a?{...c,hoard:[...c.hoard]}:c)),i}),updateState:n=>r(n)}}function Dr(e,t,r,n){let s=null;return!r&&e.open[t]?(s=e.open[t],e.open[t]=null):s=e.piles[t].pop()||null,s&&(s.faceUp=!r&&s.faceUp,n.hoard=[...n.hoard,s]),s}function Cn(e,t){!e.open[t]&&e.piles[t].length>0&&(e.open[t]=e.piles[t].pop(),e.open[t].faceUp=!0)}const Ee=ji();var Vi=$('<button class="color-btn svelte-14erc7o"> </button>'),Yi=$('<div class="start-screen svelte-14erc7o"><div class="rules-brief svelte-14erc7o"><strong class="svelte-14erc7o">Quick Rules:</strong> <p class="svelte-14erc7o"><strong class="svelte-14erc7o">Goal:</strong> First to 15 points wins instantly! Or, when the action track fills (10 slots), highest score wins.</p> <p class="svelte-14erc7o"><strong class="svelte-14erc7o">Each Turn:</strong> Draw an asset card OR play an action card (choose one), then optionally add one card to your collection.</p> <p class="svelte-14erc7o"><strong class="svelte-14erc7o">Drawing:</strong> You can draw from a tier if you have 2+ cards of the tier below it OR 2+ cards of that same tier. Having 2+ cards of a higher tier also lets you take face-up cards from lower tiers.</p> <p class="svelte-14erc7o"><strong class="svelte-14erc7o">Actions:</strong> Trade cards, destroy cards, gift to opponents, or return cards. Each action once per game.</p> <p class="svelte-14erc7o"><strong class="svelte-14erc7o">Collections:</strong> Collect Art, Vehicles, or Garments. Leading collection = +1 point at turn end. Need 3+ to score.</p> <p class="svelte-14erc7o"><strong class="svelte-14erc7o">Points:</strong> Earn points by playing actions on the track and leading collections.</p></div> <div class="setup svelte-14erc7o"><div class="setup-row svelte-14erc7o"><label class="svelte-14erc7o">Players: <select class="svelte-14erc7o"><option>2</option><option>3</option><option>4</option></select></label></div> <div class="setup-row svelte-14erc7o"><label class="pick-label svelte-14erc7o">Pick your player color to start:</label></div> <div class="color-picker svelte-14erc7o"></div></div></div>');function zi(e,t){Ye(t,!0);const{ColorNames:r,ColorBorders:n}=Ve,s={red:1,yellow:2,green:3,blue:4};let i=ue(4),a=F(()=>["red","yellow","green","blue"].slice(0,l(i)));function o(U){const E=s[U];Ee.setupGame(l(i),E)}var u=Yi(),c=b(g(u),2),v=g(c),h=g(v),d=b(g(h)),f=g(d);f.value=f.__value=2;var _=b(f);_.value=_.__value=3;var C=b(_);C.value=C.__value=4;var A=b(v,4);Ce(A,21,()=>l(a),we,(U,E)=>{var R=Vi(),J=g(R);Y(()=>{Ke(R,`background: ${n[l(E)]??""};`),Q(J,r[l(E)])}),V("click",R,()=>o(l(E))),y(U,R)}),Ri(d,()=>l(i),U=>m(i,U)),y(e,u),ze()}var Hi=$('<img class="preview-img svelte-1efofyg"/>'),Wi=$('<div class="dialog-overlay svelte-1efofyg" role="button" tabindex="0"><div class="dialog svelte-1efofyg"><!> <p class="svelte-1efofyg"> </p> <div class="dialog-buttons svelte-1efofyg"><button class="yes-btn svelte-1efofyg"> </button> <button class="no-btn svelte-1efofyg"> </button></div></div></div>');function ps(e,t){Ye(t,!0);const r=Er();let n=We(t,"show",3,!1),s=We(t,"imageSrc",3,null),i=We(t,"imageAlt",3,"Preview"),a=We(t,"message",3,"Are you sure?"),o=We(t,"confirmText",3,"Yes"),u=We(t,"cancelText",3,"No");function c(){r("confirm")}function v(){r("cancel")}function h(){r("cancel")}var d=Te(),f=le(d);{var _=C=>{var A=Wi(),U=g(A),E=g(U);{var R=K=>{var w=Hi();Y(()=>{oe(w,"src",s()),oe(w,"alt",i())}),y(K,w)};H(E,K=>{s()&&K(R)})}var J=b(E,2),X=g(J),D=b(J,2),x=g(D),B=g(x),j=b(x,2),W=g(j);Y(()=>{Q(X,a()),Q(B,o()),Q(W,u())}),V("click",x,c),V("click",j,v),V("click",U,mt(function(K){yt.call(this,t,K)})),V("click",A,h),y(C,A)};H(f,C=>{n()&&C(_)})}y(e,d),ze()}var Ki=$('<span class="cat-item svelte-1domlsb" role="button" tabindex="0"><img alt="" class="category-icon svelte-1domlsb"/><span class="cat-count svelte-1domlsb"> </span></span>'),Qi=$('<div class="empty-overlay svelte-1domlsb">Empty</div>'),Xi=$('<div class="count-badge svelte-1domlsb"> </div>'),Zi=$('<img alt="Open card" class="svelte-1domlsb"/>'),Ji=$('<div class="no-card svelte-1domlsb">—</div>'),el=$('<div class="tier-row svelte-1domlsb"><div class="tier-icons svelte-1domlsb"></div> <div><button><img class="svelte-1domlsb"/> <!></button> <button><!></button></div></div>'),tl=$('<div class="category-popup svelte-1domlsb"> </div>'),rl=$('<div class="draw-piles svelte-1domlsb"><h3 class="section-title svelte-1domlsb">Draw Piles</h3> <div class="tiers-grid svelte-1domlsb"></div></div> <!> <!>',1);function nl(e,t){Ye(t,!0);const r=()=>$t(Ee,"$gameStore",n),[n,s]=Pt(),{cardBacks:i}=Ve,a={4:{1:3,2:3,5:3},3:{1:4,2:4,3:4,5:2},2:{1:4,2:4,3:4,4:4,5:1},1:{1:5,2:5,3:5,4:5}},o={1:"./Game_Graphics/Cat_1_Art_icon.png",2:"./Game_Graphics/Cat_2_Vehicles_icon.png",3:"./Game_Graphics/Cat_3_Garments_icon.png",4:"./Game_Graphics/Cat_4_Perishables_icon.png",5:"./Game_Graphics/Cat_5_Debaucheries_icon.png"},u={1:"Art - Paintings & sculptures. Collectible for prestige.",2:"Vehicles - Transportation items. Collectible for prestige.",3:"Garments - Clothing & textiles. Collectible for prestige.",4:"Perishables - Food & consumables. Cannot be collected.",5:"Debaucheries - Vices & indulgences. Cannot be collected."};let c=ue(null),v=F(()=>r().humanId),h=ue(!1),d=ue(null);function f(){const w=r().players[r().currentPlayer];return w?_s(w):[1]}function _(w){const N=r().players[r().currentPlayer];return!N||N.id!==l(v)||r().turnState.hasDrawn||r().turnState.hasActed?!1:f().includes(w)}function C(w){_(w)&&r().piles[w].length!==0&&(m(d,{tier:w,type:"faceDown"},!0),m(h,!0))}function A(w){_(w)&&r().open[w]&&(m(d,{tier:w,type:"faceUp"},!0),m(h,!0))}function U(){if(!l(d))return;const{tier:w,type:N}=l(d),L=N==="faceDown";Ee.drawCard(w,L),m(h,!1),m(d,null)}function E(){m(h,!1),m(d,null)}function R(w,N){const L=N.target.getBoundingClientRect();m(c,{cat:w,x:L.left+L.width/2,y:L.top},!0)}function J(){m(c,null)}Lr(()=>{const w=f();w.length>0&&r().gameStarted&&w.some(L=>!r().open[L]&&r().piles[L].length>0)&&Ee.updateState(L=>(w.forEach(se=>{!L.open[se]&&L.piles[se].length>0&&(L.open[se]=L.piles[se].pop())}),L))});var X=rl(),D=le(X),x=b(g(D),2);Ce(x,20,()=>[4,3,2,1],we,(w,N)=>{const L=F(()=>a[N]),se=F(()=>r().piles[N].length),he=F(()=>r().open[N]),$e=F(f),fe=F(()=>r().players[r().currentPlayer]),O=F(()=>l(fe)?.id===l(v)),re=F(()=>r().turnState.hasDrawn||r().turnState.hasActed),ee=F(()=>l(O)&&!l(re)&&l($e).includes(N));var p=el(),k=g(p);Ce(k,20,()=>[1,2,3,4,5],we,(te,Z)=>{var pe=Te(),xe=le(pe);{var Fe=Oe=>{var ke=Ki(),ye=g(ke),ve=b(ye),Le=g(ve);Y(()=>{oe(ye,"src",o[Z]),Q(Le,l(L)[Z])}),V("click",ke,Qe=>R(Z,Qe)),V("mouseleave",ke,J),y(Oe,ke)};H(xe,Oe=>{l(L)[Z]&&Oe(Fe)})}y(te,pe)});var q=b(k,2);let S;var T=g(q);let M;var P=g(T),I=b(P,2);{var G=te=>{var Z=Qi();y(te,Z)},z=te=>{var Z=Xi(),pe=g(Z);Y(()=>Q(pe,l(se))),y(te,Z)};H(I,te=>{l(se)===0?te(G):te(z,!1)})}var ne=b(T,2);let ce;var ie=g(ne);{var _e=te=>{var Z=Zi();Y(()=>oe(Z,"src",l(he).id)),y(te,Z)},be=te=>{var Z=Ji();y(te,Z)};H(ie,te=>{l(he)?te(_e):te(be,!1)})}Y(()=>{S=ut(q,1,"tier-cards svelte-1domlsb",null,S,{disabled:!l(ee)}),M=ut(T,1,"card-btn svelte-1domlsb",null,M,{clickable:l(ee)&&l(se)>0}),T.disabled=!l(ee)||l(se)===0,oe(T,"title",l(ee)&&l(se)>0?`Draw face-down (${l(se)} left)`:""),oe(P,"src",i[N]),oe(P,"alt",`Tier ${N??""} back`),ce=ut(ne,1,"card-btn svelte-1domlsb",null,ce,{clickable:l(ee)&&l(he)}),ne.disabled=!l(ee)||!l(he),oe(ne,"title",l(ee)&&l(he)?"Take face-up card":"")}),V("click",T,()=>C(N)),V("click",ne,()=>A(N)),y(w,p)});var B=b(D,2);{var j=w=>{var N=tl(),L=g(N);Y(()=>{Ke(N,`left: ${l(c).x??""}px; top: ${l(c).y??""}px;`),Q(L,u[l(c).cat])}),y(w,N)};H(B,w=>{l(c)&&w(j)})}var W=b(B,2);{var K=w=>{{let N=F(()=>l(d)?.type==="faceUp"&&r().open[l(d).tier]?r().open[l(d).tier].id:null);ps(w,{show:!0,get imageSrc(){return l(N)},imageAlt:"Card preview",message:"Draw this card?",$$events:{confirm:U,cancel:E}})}};H(W,w=>{l(h)&&w(K)})}y(e,X),ze(),s()}var sl=$('<img class="action-img clickable svelte-6eorwp" role="button" tabindex="0"/>'),il=$('<div class="slot-points-big svelte-6eorwp"> </div>'),ll=$("<div><!></div>"),al=$('<img class="info-asset-card svelte-6eorwp"/>'),ol=$('<div class="summary-row bonus svelte-6eorwp"><span> </span> <span class="points svelte-6eorwp">+1</span></div>'),cl=$('<div class="info-overlay svelte-6eorwp" role="button" tabindex="0"><div class="info-dialog svelte-6eorwp"><h3 class="svelte-6eorwp"> </h3> <div class="cards-row svelte-6eorwp"><img class="info-action-card svelte-6eorwp"/> <!></div> <div class="points-summary svelte-6eorwp"><div class="summary-row svelte-6eorwp"><span> </span> <span class="value svelte-6eorwp"> </span></div> <div class="summary-row svelte-6eorwp"><span> </span> <span class="points svelte-6eorwp"> </span></div> <!></div> <button class="close-btn svelte-6eorwp">Close</button></div></div>'),ul=$('<div class="action-track svelte-6eorwp"><div class="track-header svelte-6eorwp"><h3 class="svelte-6eorwp">Action Track</h3> <div class="min-values svelte-6eorwp"><div class="min-value svelte-6eorwp" title="Status Signaling - minimum to beat"><span class="action-label svelte-6eorwp">Status:</span> <strong class="svelte-6eorwp"> </strong></div> <div class="min-value svelte-6eorwp" title="Destruction - minimum to beat"><span class="action-label svelte-6eorwp">Destruction:</span> <strong class="svelte-6eorwp"> </strong></div> <div class="min-value svelte-6eorwp" title="Competitive - minimum to beat"><span class="action-label svelte-6eorwp">Competitive:</span> <strong class="svelte-6eorwp"> </strong></div> <div class="min-value svelte-6eorwp" title="Potlatch - minimum to beat"><span class="action-label svelte-6eorwp">Potlatch:</span> <strong class="svelte-6eorwp"> </strong></div></div></div> <div class="track-grid svelte-6eorwp"></div></div> <!>',1);function fl(e,t){Ye(t,!0);const r=()=>$t(Ee,"$gameStore",n),[n,s]=Pt(),{TrackPoints:i,actionImages:a,actionTypeIndex:o,ColorNames:u,ColorBorders:c,PlayerColors:v}=Ve;let h=F(()=>r().minRequiredByType),d=F(()=>r().pioneerByType),f=ue(null),_=ue(null);function C(re,ee){m(f,re,!0),m(_,ee,!0)}function A(){m(f,null),m(_,null)}var U=ul(),E=le(U),R=g(E),J=b(g(R),2),X=g(J),D=b(g(X),2),x=g(D),B=b(X,2),j=b(g(B),2),W=g(j),K=b(B,2),w=b(g(K),2),N=g(w),L=b(K,2),se=b(g(L),2),he=g(se),$e=b(R,2);Ce($e,20,()=>Array(10),we,(re,ee,p)=>{var k=ll();let q;var S=g(k);{var T=P=>{const I=F(()=>r().track[p]);var G=sl();Y(()=>{oe(G,"src",a[l(I).byPlayer][o[l(I).actionType]]),oe(G,"alt",l(I).actionType)}),V("click",G,()=>C(l(I),p)),y(P,G)},M=P=>{var I=il(),G=g(I);Y(()=>Q(G,i[p])),y(P,I)};H(S,P=>{p<r().track.length?P(T):P(M,!1)})}Y(()=>q=ut(k,1,"track-slot svelte-6eorwp",null,q,{empty:p>=r().track.length})),y(re,k)});var fe=b(E,2);{var O=re=>{const ee=F(()=>l(d)[l(f).actionType]===l(f).byPlayer),p=F(()=>v[l(f).byPlayer]);var k=cl(),q=g(k),S=g(q),T=g(S),M=b(S,2),P=g(M),I=b(P,2);{var G=ve=>{var Le=Te(),Qe=le(Le);Ce(Qe,17,()=>l(f).assetCards,we,(lt,at)=>{var Je=al();Y(()=>{oe(Je,"src",l(at).id),oe(Je,"alt",`T${l(at).tier??""}`)}),y(lt,Je)}),y(ve,Le)};H(I,ve=>{l(f).assetCards&&l(f).assetCards.length>0&&ve(G)})}var z=b(M,2),ne=g(z),ce=g(ne),ie=g(ce),_e=b(ce,2),be=g(_e),te=b(ne,2),Z=g(te),pe=g(Z),xe=b(Z,2),Fe=g(xe),Oe=b(te,2);{var ke=ve=>{var Le=ol(),Qe=g(Le),lt=g(Qe);Y(()=>Q(lt,`Pioneer bonus (first ${l(f).actionType??""})`)),y(ve,Le)};H(Oe,ve=>{l(ee)&&ve(ke)})}var ye=b(z,2);Y(ve=>{Q(T,`Slot ${l(_)+1} — ${ve??""}`),oe(P,"src",a[l(f).byPlayer][o[l(f).actionType]]),oe(P,"alt",l(f).actionType),Ke(ce,`color: ${c[l(p)]??""};`),Q(ie,u[l(p)]),Q(be,`Value: ${l(f).value??""}`),Q(pe,`Slot ${l(_)+1} base points`),Q(Fe,`+${l(f).points??""}`)},[()=>l(f).actionType.charAt(0).toUpperCase()+l(f).actionType.slice(1)]),V("click",ye,A),V("click",q,mt(function(ve){yt.call(this,t,ve)})),V("click",k,A),y(re,k)};H(fe,re=>{l(f)&&re(O)})}Y(()=>{Q(x,l(h).status||0),Q(W,l(h).destruction||0),Q(N,l(h).competitive||0),Q(he,l(h).potlatch||0)}),y(e,U),ze(),s()}const{CategoryNames:pr,TierNames:dl,TrackPoints:vl}=Ve;function $r(e,t,r,n){if(e.track.length>=10)return{success:!1,message:"Action track is full. Game ends."};const s=n.reduce((d,f)=>d+f.value,0),i=e.minRequiredByType[t];if(s<=i)return{success:!1,message:`Action '${t}' must exceed previous value of ${i}. Your total: ${s}.`};let a=!1;if(!e.pioneerByType[t]&&(e.pioneerByType[t]=r,e.players[r-1].points+=1,e.players[r-1].pointsLog.push({reason:`Pioneer: first ${t}`,amount:1}),a=!0,e.players[r-1].points>=15))return{success:!0,win:!0,pioneerBonus:!0,message:`Player ${r} wins with ${e.players[r-1].points} points!`};e.track.forEach(d=>{d.actionType===t&&d.value<s&&(d.tierChits={1:0,2:0,3:0,4:0})}),e.minRequiredByType[t]=s;const o={1:0,2:0,3:0,4:0};n.forEach(d=>o[d.tier]++);const u=e.track.length,c=vl[u],v=n.map(d=>({id:d.id,tier:d.tier,category:d.category,value:d.value}));if(e.track.push({actionType:t,byPlayer:r,value:s,tierChits:o,points:c,assetCards:v}),e.players[r-1].points+=c,e.players[r-1].pointsLog.push({reason:`Track slot ${u+1}: ${t}`,amount:c}),e.players[r-1].points>=15)return{success:!0,win:!0,message:`Player ${r} wins with ${e.players[r-1].points} points!`};e.actionTypePlays[t]++;const h=e.players.length;if(e.actionTypePlays[t]===h&&(e.players[r-1].points+=1,e.players[r-1].pointsLog.push({reason:`Completion: all played ${t}`,amount:1}),e.players[r-1].points>=15))return{success:!0,win:!0,message:`Player ${r} wins with ${e.players[r-1].points} points!`};if(e.track.length===10){const d={status:null,destruction:null,competitive:null,potlatch:null};e.track.forEach(E=>{(!d[E.actionType]||E.value>d[E.actionType].value)&&(d[E.actionType]=E)});const f={};Object.entries(d).forEach(([E,R])=>{R&&(e.players[R.byPlayer-1].points+=1,e.players[R.byPlayer-1].pointsLog.push({reason:`Finale: highest ${E}`,amount:1}),f[R.byPlayer]||(f[R.byPlayer]=[]),f[R.byPlayer].push(`${E} (finale)`))});let _=0,C=null,A=!1;return e.players.forEach(E=>{E.points>_?(_=E.points,C=E.id,A=!1):E.points===_&&(A=!0)}),{success:!0,trackComplete:!0,bonuses:Object.entries(f).map(([E,R])=>`Player ${E}: +${R.length} (${R.join(", ")})`).join("; "),winner:A?null:C,finalScores:e.players.map(E=>({id:E.id,points:E.points}))}}return{success:!0,pioneerBonus:a}}function Ur(e,t,r=null){const n=or(t),s=[1,2,3,4].filter(v=>n[v]>=2);if(!s.length)return{success:!1,message:"You need at least two cards in a tier."};let i,a;if(r&&r.length>=2){i=r[0].tier,a=r;const v=r.map(h=>h.id);t.hoard=t.hoard.filter(h=>!v.includes(h.id))}else if(t.id!==rr){i=s[0],a=[];const v=[];for(let h=t.hoard.length-1;h>=0;h--)t.hoard[h].tier===i&&a.length<2?a.push(t.hoard[h]):v.push(t.hoard[h]);t.hoard=v.reverse()}else return{success:!1,needsSelection:!0,tiers:s};e.lastActionCards=a.slice(),a.forEach(v=>e.piles[v.tier].unshift(v));let o=null;e.piles[i].length>0&&(o=e.piles[i].pop(),t.hoard=[...t.hoard,o]);const u=e.players.findIndex(v=>v.id===t.id);e.players=e.players.map((v,h)=>h===u?{...v}:v);const c=$r(e,"status",t.id,e.lastActionCards);return c.success?{success:!0,message:`Status signaling: traded ${a.length} ${dl[i]} → gained 1.`,win:c.win,trackComplete:c.trackComplete}:c}function Gr(e,t,r=null){const n={};t.hoard.forEach(c=>n[c.category]=(n[c.category]||0)+1);const s=Object.entries(n).filter(([c,v])=>v>=2);if(!s.length)return{success:!1,message:"Need ≥2 cards of the same category to destroy."};let i,a;if(r&&r.length>=2){i=r[0].category,a=r;const c=r.map(v=>v.id);t.hoard=t.hoard.filter(v=>!c.includes(v.id))}else if(t.id!==rr){i=Number(s.sort((v,h)=>h[1]-v[1])[0][0]),a=[];const c=[];for(let v=t.hoard.length-1;v>=0;v--)t.hoard[v].category===i&&a.length<2?a.push(t.hoard[v]):c.push(t.hoard[v]);t.hoard=c.reverse()}else return{success:!1,needsSelection:!0,categories:s};e.lastActionCards=a.slice();const o=e.players.findIndex(c=>c.id===t.id);e.players=e.players.map((c,v)=>v===o?{...c}:c);const u=$r(e,"destruction",t.id,e.lastActionCards);return u.success?{success:!0,message:`Destruction: destroyed ${a.length} ${pr[i]} cards.`,win:u.win,trackComplete:u.trackComplete}:u}function jr(e,t,r=null){const n=t.hoard.filter(o=>o.category===4||o.category===5);if(n.length<2)return{success:!1,message:"Need ≥2 Perishables/Debaucheries to return."};let s;if(r&&r.length>=2){s=r;const o=r.map(u=>u.id);t.hoard=t.hoard.filter(u=>!o.includes(u.id))}else if(t.id!==rr){s=[];const o=[];for(let u=t.hoard.length-1;u>=0;u--){const c=t.hoard[u];(c.category===4||c.category===5)&&s.length<2?s.push(c):o.push(c)}t.hoard=o.reverse()}else return{success:!1,needsSelection:!0,eligible:n};e.lastActionCards=s.slice(),s.forEach(o=>e.piles[o.tier].unshift(o));const i=e.players.findIndex(o=>o.id===t.id);e.players=e.players.map((o,u)=>u===i?{...o}:o);const a=$r(e,"potlatch",t.id,e.lastActionCards);return a.success?{success:!0,message:`Potlatch: returned ${s.length} cards to draw piles.`,win:a.win,trackComplete:a.trackComplete}:a}function hs(e,t,r,n=null){const s=e.players[r-1],i=s.collectionCategory;if(s.collection.filter(f=>f.category===i).length<1)return{success:!1,message:`Cannot target Player ${s.id}: they don't have any ${pr[i]} cards in their collection yet.`};const o=`${s.id}:${i}`,u=e.competitiveLastTier[o]||0;let c;if(n){if(n.category!==i||n.tier<=u)return{success:!1,message:"Invalid card selection for competitive display."};c=n,t.hoard=t.hoard.filter(f=>f.id!==c.id)}else{const f=t.hoard.findIndex(_=>_.category===i&&_.tier>u);if(f<0)return u>0?{success:!1,message:`Gift must be higher than previous Tier ${u}. Provide Tier ${u+1} or above.`}:{success:!1,message:`You need an asset matching recipient's collection category (${pr[i]}).`};c=t.hoard[f],t.hoard=t.hoard.filter((_,C)=>C!==f)}e.lastActionCards=[c],s.collection=[...s.collection,c],s.points-=2,s.pointsLog.push({reason:`Competitive: received gift from P${t.id}`,amount:-2});const v=e.players.findIndex(f=>f.id===t.id),h=e.players.findIndex(f=>f.id===s.id);e.players=e.players.map((f,_)=>_===v||_===h?{...f}:f);const d=$r(e,"competitive",t.id,e.lastActionCards);return d.success?(e.competitiveLastTier[o]=c.tier,{success:!0,message:`Competitive display: gave ${pr[i]} to Player ${s.id} (−2 pts to recipient).`,win:d.win,trackComplete:d.trackComplete}):d}const{CategoryNames:vr}=Ve;function _l(e){const t=e.players[e.currentPlayer];e.turnState={hasDrawn:!1,hasActed:!1,hasMovedToCollection:!1};let r=[],n="",s=!1;const i=or(t),a={};t.hoard.forEach(d=>a[d.category]=(a[d.category]||0)+1);const u=10-e.track.length<=5;function c(d,f){const _=f.reduce((A,U)=>A+U.value,0),C=e.minRequiredByType[d];return _>C}if(!s&&!t.actionsUsed.status){const d=[4,3,2,1].filter(f=>i[f]>=2);if(d.length>0){let f=null;for(const _ of d){const C=t.hoard.filter(A=>A.tier===_).slice(0,2);if(c("status",C)){f=_;break}}if(f||u&&d.length>0){const _=Ur(e,t);if(_.success&&(t.actionsUsed.status=!0,s=!0,e.turnState.hasActed=!0,r.push("• Played Status Signaling"),e.lastActionCards.length>0&&(n=e.lastActionCards.map(C=>`<img src="${C.id}" class="turn-summary-card" title="${vr[C.category]} T${C.tier}"/>`).join("")),_.trackComplete))return t.lastTurnSummary=r.join("<br/>")+(n?`<div class="turn-summary-cards">${n}</div>`:""),e.aiTurnReport=`<strong>Player ${t.id} filled the track!</strong><br/>${_.bonuses?"Bonuses: "+_.bonuses+"<br/>":""}`+t.lastTurnSummary,e}}}if(!s&&!t.actionsUsed.destruction){const d=Object.entries(a).filter(([f,_])=>_>=2);if(d.length>0){let f=!1;for(const[_,C]of d){const A=t.hoard.filter(U=>U.category===Number(_)).slice(0,2);if(c("destruction",A)){f=!0;break}}if(f||u){const _=Gr(e,t);if(_.success&&(t.actionsUsed.destruction=!0,s=!0,e.turnState.hasActed=!0,r.push("• Played Destruction"),e.lastActionCards.length>0&&(n=e.lastActionCards.map(C=>`<img src="${C.id}" class="turn-summary-card" title="${vr[C.category]} T${C.tier}"/>`).join("")),_.trackComplete))return t.lastTurnSummary=r.join("<br/>")+(n?`<div class="turn-summary-cards">${n}</div>`:""),e.aiTurnReport=`<strong>Player ${t.id} filled the track!</strong><br/>${_.bonuses?"Bonuses: "+_.bonuses+"<br/>":""}`+t.lastTurnSummary,e}}}if(!s&&!t.actionsUsed.competitive){let d=null,f=null;for(const _ of e.players){if(_.id===t.id)continue;const C=`${_.id}:${_.collectionCategory}`,A=e.competitiveLastTier[C]||0,U=_.collection.filter(R=>R.category===_.collectionCategory).length,E=t.hoard.filter(R=>R.category===_.collectionCategory&&R.tier>A);if(U>=1&&E.length>0){for(const R of E.sort((J,X)=>X.value-J.value))if(R.value>e.minRequiredByType.competitive){d=_.id,f=R;break}if(d)break}}if(d&&f){const _=hs(e,t,d,f);if(_.success&&(t.actionsUsed.competitive=!0,s=!0,e.turnState.hasActed=!0,r.push(`• Played Competitive Display (to Player ${d})`),e.lastActionCards.length>0&&(n=e.lastActionCards.map(C=>`<img src="${C.id}" class="turn-summary-card" title="${vr[C.category]} T${C.tier}"/>`).join("")),_.trackComplete))return t.lastTurnSummary=r.join("<br/>")+(n?`<div class="turn-summary-cards">${n}</div>`:""),e.aiTurnReport=`<strong>Player ${t.id} filled the track!</strong><br/>${_.bonuses?"Bonuses: "+_.bonuses+"<br/>":""}`+t.lastTurnSummary,e}}if(!s&&!t.actionsUsed.potlatch&&t.hoard.filter(f=>f.category===4||f.category===5).length>=2){const f=jr(e,t);if(f.success&&(t.actionsUsed.potlatch=!0,s=!0,e.turnState.hasActed=!0,r.push("• Played Potlatch"),e.lastActionCards.length>0&&(n=e.lastActionCards.map(_=>`<img src="${_.id}" class="turn-summary-card" title="${vr[_.category]} T${_.tier}"/>`).join("")),f.trackComplete))return t.lastTurnSummary=r.join("<br/>")+(n?`<div class="turn-summary-cards">${n}</div>`:""),e.aiTurnReport=`<strong>Player ${t.id} filled the track!</strong><br/>${f.bonuses?"Bonuses: "+f.bonuses+"<br/>":""}`+t.lastTurnSummary,e}if(!s){const d=_s(t);let f=d[d.length-1];!d.includes(3)&&i[2]===1&&d.includes(2)?f=2:!d.includes(4)&&i[3]===1&&d.includes(3)?f=3:i[1]>=4&&d.includes(2)&&(f=2);let _=null;e.open[f]?(_=e.open[f],e.piles[f].length>0?e.open[f]=e.piles[f].pop():e.open[f]=null):e.piles[f].length>0&&(_=e.piles[f].pop()),_&&(t.hoard=[...t.hoard,_],e.turnState.hasDrawn=!0,r.push(`• Drew from Tier ${f}`))}pl(e,t);let v=r.join("<br/>");n&&(v+=`<div class="turn-summary-cards">${n}</div>`),t.lastTurnSummary=v,e.aiTurnReport=`<strong>Player ${t.id} Turn Summary:</strong><br/>`+v;const h=e.players.findIndex(d=>d.id===t.id);return e.players=e.players.map((d,f)=>f===h?{...d}:d),e}function pl(e,t){const r=t.hoard.some(s=>s.category===t.collectionCategory&&s.category<=3);if(t.hoard.filter(s=>s.category===t.collectionCategory&&s.category<=3),!r&&t.collection.length>0)for(;t.collection.length>0;){const s=t.collection.pop();e.piles[s.tier].unshift(s)}if(!r||t.collectionCategory===void 0){const s={1:0,2:0,3:0};t.hoard.forEach(o=>{o.category<=3&&s[o.category]++});let i=1,a=s[1];[2,3].forEach(o=>{s[o]>a&&(a=s[o],i=o)}),t.collectionCategory=i}if(t.hoard.filter(s=>s.category===t.collectionCategory&&s.category<=3).length>=3||t.collection.length>=2){let s=-1,i=-1;if(t.hoard.forEach((a,o)=>{a.category===t.collectionCategory&&a.category<=3&&a.value>i&&(i=a.value,s=o)}),s>=0){const a=t.hoard[s];t.hoard=t.hoard.filter((o,u)=>u!==s),t.collection=[...t.collection,a]}}}var hl=$('<button class="option-btn svelte-e9smhb"> </button>'),gl=$('<p class="svelte-e9smhb">Select which tier to use:</p> <div class="option-list svelte-e9smhb"></div>',1),ml=$('<button class="option-btn svelte-e9smhb"> </button>'),yl=$('<p class="svelte-e9smhb">Select which category to destroy:</p> <div class="option-list svelte-e9smhb"></div>',1),bl=$('<button class="option-btn svelte-e9smhb"> </button>'),wl=$('<p class="svelte-e9smhb">Select target player:</p> <div class="option-list svelte-e9smhb"></div>',1),Cl=$('<button><img class="svelte-e9smhb"/> <span class="card-label svelte-e9smhb"> </span></button>'),kl=$('<p class="svelte-e9smhb"><!></p> <div class="card-grid svelte-e9smhb"></div> <div class="modal-actions svelte-e9smhb"><button class="btn-back svelte-e9smhb">← Back</button> <button class="btn-cancel svelte-e9smhb">Cancel</button> <button class="btn-confirm svelte-e9smhb">Confirm</button></div>',1),Al=$('<button><img class="svelte-e9smhb"/> <span class="card-label svelte-e9smhb"> </span></button>'),Tl=$('<p class="svelte-e9smhb"> </p> <div class="card-grid svelte-e9smhb"></div> <div class="modal-actions svelte-e9smhb"><button class="btn-cancel svelte-e9smhb">Cancel</button> <button class="btn-confirm svelte-e9smhb">Confirm</button></div>',1),Sl=$('<div class="modal-overlay svelte-e9smhb"><div class="modal svelte-e9smhb"><h2 class="svelte-e9smhb"><!></h2> <!> <!></div></div>');function xl(e,t){Ye(t,!0);const r=()=>$t(Ee,"$gameStore",n),[n,s]=Pt(),i=Er(),{CategoryNames:a,TierNames:o,ColorNames:u}=Ve;let c=F(()=>r().players.find(O=>O.id===t.player.id)||t.player),v=ue(1),h=ue(null),d=ue(null),f=ue(Lt([])),_=ue(null),C=F(()=>A(t.mode,l(v),l(c),t.data));function A(O,re,ee,p){return O==="potlatch"?p.length>0?p:ee.hoard:re===2||O==="potlatch"?ee.hoard:[]}function U(O){m(h,O,!0),m(v,2)}function E(O){m(d,O,!0),m(v,2)}function R(O){m(_,O,!0),m(v,2)}function J(O){l(f).indexOf(O)>=0?m(f,l(f).filter(ee=>ee!==O),!0):t.mode==="competitive"?m(f,[O],!0):m(f,[...l(f),O],!0)}function X(){t.mode==="competitive"?i("select",{recipientId:l(_).id,card:l(f)[0]}):i("select",l(f))}function D(){i("cancel")}let x=F(()=>t.mode==="competitive"?l(f).length===1:l(f).length>=2);var B=Sl(),j=g(B),W=g(j),K=g(W);{var w=O=>{var re=et("Status Signaling - Select 2+ Cards");y(O,re)},N=O=>{var re=Te(),ee=le(re);{var p=q=>{var S=et("Destruction - Select 2+ Cards to Destroy");y(q,S)},k=q=>{var S=Te(),T=le(S);{var M=I=>{var G=et("Potlatch - Select 2+ Cards to Return");y(I,G)},P=I=>{var G=Te(),z=le(G);{var ne=ce=>{var ie=et("Competitive Display - Select Recipient & Card");y(ce,ie)};H(z,ce=>{t.mode==="competitive"&&ce(ne)},!0)}y(I,G)};H(T,I=>{t.mode==="potlatch"?I(M):I(P,!1)},!0)}y(q,S)};H(ee,q=>{t.mode==="destruction"?q(p):q(k,!1)},!0)}y(O,re)};H(K,O=>{t.mode==="status"?O(w):O(N,!1)})}var L=b(W,2);{var se=O=>{var re=Te(),ee=le(re);{var p=q=>{var S=gl(),T=b(le(S),2);Ce(T,21,()=>t.data,we,(M,P)=>{const I=F(()=>l(c).hoard.filter(ne=>ne.tier===l(P)).length);var G=hl(),z=g(G);Y(()=>Q(z,`${o[l(P)]??""} (${l(I)??""} cards available)`)),V("click",G,()=>U(l(P))),y(M,G)}),y(q,S)},k=q=>{var S=Te(),T=le(S);{var M=I=>{var G=yl(),z=b(le(G),2);Ce(z,21,()=>t.data,we,(ne,ce)=>{var ie=F(()=>ks(l(ce),2));let _e=()=>l(ie)[0],be=()=>l(ie)[1];var te=ml(),Z=g(te);Y(pe=>Q(Z,`${pe??""} (${be()??""} cards)`),[()=>a[Number(_e())]]),V("click",te,()=>E(Number(_e()))),y(ne,te)}),y(I,G)},P=I=>{var G=Te(),z=le(G);{var ne=ce=>{var ie=wl(),_e=b(le(ie),2);Ce(_e,21,()=>t.data,we,(be,te)=>{var Z=bl(),pe=g(Z);Y(()=>Q(pe,`${u[l(te).color]??""} (${a[l(te).collectionCategory]??""} collection)`)),V("click",Z,()=>R(l(te))),y(be,Z)}),y(ce,ie)};H(z,ce=>{t.mode==="competitive"&&ce(ne)},!0)}y(I,G)};H(T,I=>{t.mode==="destruction"?I(M):I(P,!1)},!0)}y(q,S)};H(ee,q=>{t.mode==="status"?q(p):q(k,!1)})}y(O,re)},he=O=>{var re=Te(),ee=le(re);{var p=k=>{var q=kl(),S=le(q),T=g(S);{var M=ie=>{var _e=et();Y(()=>Q(_e,`Select 1 card to gift to ${u[l(_).color]??""} (must match their ${a[l(_).collectionCategory]??""} collection):`)),y(ie,_e)},P=ie=>{var _e=Te(),be=le(_e);{var te=pe=>{var xe=et();Y(()=>Q(xe,`Select 2+ cards of ${o[l(h)]??""} (${l(f).length??""} selected):`)),y(pe,xe)},Z=pe=>{var xe=Te(),Fe=le(xe);{var Oe=ye=>{var ve=et();Y(()=>Q(ve,`Select 2+ ${a[l(d)]??""} cards to destroy (${l(f).length??""} selected):`)),y(ye,ve)},ke=ye=>{var ve=et();Y(()=>Q(ve,`Select 2+ cards (${l(f).length??""} selected):`)),y(ye,ve)};H(Fe,ye=>{t.mode==="destruction"?ye(Oe):ye(ke,!1)},!0)}y(pe,xe)};H(be,pe=>{t.mode==="status"?pe(te):pe(Z,!1)},!0)}y(ie,_e)};H(T,ie=>{t.mode==="competitive"?ie(M):ie(P,!1)})}var I=b(S,2);Ce(I,21,()=>l(C),we,(ie,_e)=>{var be=Cl();let te;var Z=g(be),pe=b(Z,2),xe=g(pe);Y(Fe=>{te=ut(be,1,"card-option svelte-e9smhb",null,te,Fe),oe(Z,"src",l(_e).id),oe(Z,"alt",`${a[l(_e).category]??""} T${l(_e).tier??""}`),Q(xe,`${a[l(_e).category]??""} T${l(_e).tier??""}`)},[()=>({selected:l(f).includes(l(_e))})]),V("click",be,()=>J(l(_e))),y(ie,be)});var G=b(I,2),z=g(G),ne=b(z,2),ce=b(ne,2);Y(()=>ce.disabled=!l(x)),V("click",I,mt(function(ie){yt.call(this,t,ie)})),V("click",z,()=>{m(v,1),m(f,[],!0)}),V("click",ne,D),V("click",ce,X),y(k,q)};H(ee,k=>{l(v)===2&&k(p)},!0)}y(O,re)};H(L,O=>{l(v)===1?O(se):O(he,!1)})}var $e=b(L,2);{var fe=O=>{var re=Tl(),ee=le(re),p=g(ee),k=b(ee,2);Ce(k,21,()=>t.data,we,(M,P)=>{var I=Al();let G;var z=g(I),ne=b(z,2),ce=g(ne);Y(ie=>{G=ut(I,1,"card-option svelte-e9smhb",null,G,ie),oe(z,"src",l(P).id),oe(z,"alt",`${a[l(P).category]??""} T${l(P).tier??""}`),Q(ce,`${a[l(P).category]??""} T${l(P).tier??""}`)},[()=>({selected:l(f).includes(l(P))})]),V("click",I,()=>J(l(P))),y(M,I)});var q=b(k,2),S=g(q),T=b(S,2);Y(()=>{Q(p,`Select 2+ cards to return (${l(f).length??""} selected):`),T.disabled=!l(x)}),V("click",k,mt(function(M){yt.call(this,t,M)})),V("click",S,D),V("click",T,X),y(O,re)};H($e,O=>{t.mode==="potlatch"&&l(v)===1&&O(fe)})}V("click",j,mt(function(O){yt.call(this,t,O)})),V("click",B,D),y(e,B),ze(),s()}var El=$('<div class="action-message svelte-1n0efr5"> </div>'),$l=$('<button><img class="svelte-1n0efr5"/></button>'),Pl=$('<div class="action-cards svelte-1n0efr5"><h3 class="svelte-1n0efr5">Your Action Cards</h3> <!> <div class="cards-platform svelte-1n0efr5"></div></div> <!> <!>',1);function Il(e,t){Ye(t,!0);const r=()=>$t(Ee,"$gameStore",n),[n,s]=Pt(),{actionImages:i}=Ve;let a=F(()=>r().humanId),o=F(()=>r().players.find(B=>B.id===l(a))),u=ue(!1),c=ue(null),v=ue(null),h=ue(""),d=ue(null),f=ue(!1),_=F(()=>r().turnState.hasDrawn||r().turnState.hasActed);function C(B,j){if(l(o).actionsUsed[B]){m(h,"You already used this action");return}if(l(_)){m(h,"You can only draw OR play an action per turn");return}m(d,{type:B,index:j},!0),m(f,!0)}function A(){m(d,null),m(f,!1)}function U(){m(f,!1),l(d)&&(E(l(d).type),m(d,null))}function E(B){Ee.updateState(j=>{const W=j.players.findIndex(N=>N.id===l(a)),K=j.players[W];let w;switch(B){case"status":if(w=Ur(j,K),w.needsSelection)return m(c,"status"),m(v,w.tiers,!0),m(u,!0),j;break;case"destruction":if(w=Gr(j,K),w.needsSelection)return m(c,"destruction"),m(v,w.categories,!0),m(u,!0),j;break;case"potlatch":if(w=jr(j,K),w.needsSelection)return m(c,"potlatch"),m(v,w.eligible,!0),m(u,!0),j;break;case"competitive":const N=j.players.filter(L=>{if(L.id===K.id||L.collection.filter(fe=>fe.category===L.collectionCategory).length<1)return!1;const he=`${L.id}:${L.collectionCategory}`,$e=j.competitiveLastTier[he]||0;return K.hoard.some(fe=>fe.category===L.collectionCategory&&fe.tier>$e)});return N.length===0?(m(h,"No eligible recipients for Competitive Display"),j):(m(c,"competitive"),m(v,N,!0),m(u,!0),j)}return w&&w.success?(K.actionsUsed[B]=!0,j.turnState.hasActed=!0,j.players=j.players.map((N,L)=>L===W?{...N}:N),m(h,w.message,!0),(w.win||w.trackComplete)&&J(j,w.win)):w&&m(h,w.message,!0),j})}function R(B){m(u,!1);const j=l(c);Ee.updateState(W=>{const K=W.players.findIndex(L=>L.id===l(a)),w=W.players[K];let N;switch(j){case"status":case"destruction":case"potlatch":N=(j==="status"?Ur:j==="destruction"?Gr:jr)(W,w,B);break;case"competitive":N=hs(W,w,B.recipientId,B.card);break}return N&&N.success?(w.actionsUsed[j]=!0,W.turnState.hasActed=!0,W.players=W.players.map((L,se)=>se===K?{...L}:L),m(h,N.message,!0),(N.win||N.trackComplete)&&J(W,N.win)):N&&m(h,N.message,!0),W}),m(c,null),m(v,null)}function J(B,j){j||([1,2,3].forEach(W=>{const K=Fr(B.players,W);K&&(B.players[K-1].points+=1)}),B.gameEnded=!0)}var X=Te(),D=le(X);{var x=B=>{var j=Pl(),W=le(j),K=b(g(W),2);{var w=fe=>{var O=El(),re=g(O);Y(()=>Q(re,l(h))),y(fe,O)};H(K,fe=>{l(h)&&fe(w)})}var N=b(K,2);Ce(N,20,()=>["status","destruction","competitive","potlatch"],we,(fe,O,re)=>{var ee=$l();let p;var k=g(ee);Y(()=>{p=ut(ee,1,"action-card svelte-1n0efr5",null,p,{used:l(o).actionsUsed[O]}),ee.disabled=l(o).actionsUsed[O]||l(_),oe(k,"src",i[l(o).id][re]),oe(k,"alt",O)}),V("click",ee,()=>C(O,re)),y(fe,ee)});var L=b(W,2);{var se=fe=>{ps(fe,{show:!0,get imageSrc(){return i[l(o).id][l(d).index]},imageAlt:"Action preview",message:"Play this action?",$$events:{confirm:U,cancel:A}})};H(L,fe=>{l(f)&&l(d)&&fe(se)})}var he=b(L,2);{var $e=fe=>{xl(fe,{get mode(){return l(c)},get data(){return l(v)},get player(){return l(o)},$$events:{select:O=>R(O.detail),cancel:()=>{m(u,!1),m(c,null)}}})};H(he,fe=>{l(u)&&fe($e)})}y(B,j)};H(D,B=>{l(o)&&B(x)})}y(e,X),ze(),s()}var Dl=$('<div class="preview-overlay svelte-ekamz6" role="button" tabindex="0"><div class="preview-card svelte-ekamz6"><img class="svelte-ekamz6"/></div></div>');function gs(e,t){Ye(t,!0);const r=Er();let n=We(t,"show",3,!1),s=We(t,"imageSrc",3,null),i=We(t,"imageAlt",3,"Card preview");function a(){r("close")}var o=Te(),u=le(o);{var c=v=>{var h=Dl(),d=g(h),f=g(d);Y(()=>{oe(f,"src",s()),oe(f,"alt",i())}),V("click",d,mt(function(_){yt.call(this,t,_)})),V("click",h,a),y(v,h)};H(u,v=>{n()&&s()&&v(c)})}y(e,o),ze()}var Rl=$('<li><span class="reason svelte-1fifckq"> </span> <span class="amount svelte-1fifckq"> </span></li>'),Nl=$('<ul class="points-list svelte-1fifckq"></ul>'),Ml=$('<p class="no-points svelte-1fifckq">No points earned yet</p>'),Ol=$('<div class="overlay svelte-1fifckq" role="button" tabindex="0"><div class="dialog svelte-1fifckq"><h3 class="svelte-1fifckq"> </h3> <!> <button class="close-btn svelte-1fifckq">Close</button></div></div>');function ms(e,t){Ye(t,!0);const r=Er(),{ColorBorders:n,ColorNames:s}=Ve;let i=We(t,"show",3,!1),a=We(t,"player",3,null),o=We(t,"title",3,null),u=F(()=>o()||(a()?`${s[a().color]} — ${a().points} points`:"Points")),c=F(()=>a()?n[a().color]:"var(--primary)");function v(){r("close")}var h=Te(),d=le(h);{var f=_=>{var C=Ol(),A=g(C),U=g(A),E=g(U),R=b(U,2);{var J=x=>{var B=Nl();Ce(B,21,()=>a().pointsLog,we,(j,W)=>{var K=Rl();let w;var N=g(K),L=g(N),se=b(N,2),he=g(se);Y(()=>{w=ut(K,1,"svelte-1fifckq",null,w,{negative:l(W).amount<0}),Q(L,l(W).reason),Q(he,`${l(W).amount>0?"+":""}${l(W).amount??""}`)}),y(j,K)}),y(x,B)},X=x=>{var B=Ml();y(x,B)};H(R,x=>{a().pointsLog&&a().pointsLog.length>0?x(J):x(X,!1)})}var D=b(R,2);Y(()=>{Ke(U,`color: ${l(c)??""};`),Q(E,l(u))}),V("click",D,v),V("click",A,mt(function(x){yt.call(this,t,x)})),V("click",C,v),y(_,C)};H(d,_=>{i()&&a()&&_(f)})}y(e,h),ze()}var Ll=$('<div class="message svelte-35ipt4"> </div>'),ql=$('<button class="reset-btn-small svelte-35ipt4">Reset Collection</button>'),Bl=$('<div class="empty-hint svelte-35ipt4">Click a card in your hoard to start a collection</div>'),Fl=$('<img class="collection-card svelte-35ipt4" role="button" tabindex="0"/>'),Ul=$('<div class="collection-stack svelte-35ipt4"></div>'),Gl=$('<div role="button" tabindex="0"><img class="svelte-35ipt4"/></div>'),jl=$('<div class="tier-stack svelte-35ipt4"></div>'),Vl=$('<div class="player-area svelte-35ipt4"><div class="player-header svelte-35ipt4"><div class="header-left svelte-35ipt4"><h2 class="svelte-35ipt4"><span class="points-clickable svelte-35ipt4"> </span></h2> <!></div> <div class="header-right svelte-35ipt4"><button class="end-turn-btn svelte-35ipt4">End Turn</button></div></div> <div class="main-content svelte-35ipt4"><div class="left-column svelte-35ipt4"><!></div> <div class="right-column svelte-35ipt4"><div class="collection-section svelte-35ipt4"><h3 class="svelte-35ipt4"><!></h3> <div class="collection-controls svelte-35ipt4"><!></div> <div class="collection-cards svelte-35ipt4"><!></div></div> <div class="hoard-section svelte-35ipt4"><h3 class="svelte-35ipt4"> </h3> <div class="hoard-cards svelte-35ipt4"><div class="hoard-tiers svelte-35ipt4"></div></div></div></div></div></div>'),Yl=$('<p class="dialog-text svelte-35ipt4">Perishables and Debaucheries cannot be collected.</p> <div class="dialog-buttons svelte-35ipt4"><button class="cancel-btn svelte-35ipt4">Close</button></div>',1),zl=$('<p class="dialog-text svelte-35ipt4">Start a <strong> </strong> collection?</p> <div class="dialog-buttons svelte-35ipt4"><button class="confirm-btn svelte-35ipt4">Start Collection</button> <button class="cancel-btn svelte-35ipt4">Cancel</button></div>',1),Hl=$('<p class="dialog-text svelte-35ipt4">Add to your <strong> </strong> collection?</p> <div class="dialog-buttons svelte-35ipt4"><button class="confirm-btn svelte-35ipt4">Add to Collection</button> <button class="cancel-btn svelte-35ipt4">Cancel</button></div>',1),Wl=$(`<p class="dialog-warning svelte-35ipt4">Warning: Choosing this card will start a new <strong> </strong> collection, 
          thus resetting your current <strong> </strong> collection 
          and returning those cards to the draw piles.</p> <div class="dialog-buttons svelte-35ipt4"><button class="danger-btn svelte-35ipt4">Replace Collection</button> <button class="cancel-btn svelte-35ipt4">Cancel</button></div>`,1),Kl=$('<div class="collection-overlay svelte-35ipt4" role="button" tabindex="0"><div class="collection-dialog svelte-35ipt4"><img alt="Card preview" class="dialog-card-img svelte-35ipt4"/> <!></div></div>'),Ql=$("<!> <!> <!> <!>",1);function Xl(e,t){Ye(t,!0);const r=()=>$t(Ee,"$gameStore",n),[n,s]=Pt(),{CategoryNames:i}=Ve;let a=F(()=>r().humanId),o=F(()=>r().players.find(p=>p.id===l(a))),u=ue(null),c=ue(""),v=ue(null),h=ue(null),d=ue(!1);function f(p){m(v,p,!0)}function _(){m(v,null)}function C(p,k){m(h,{card:p,idx:k},!0),m(u,k,!0)}function A(){m(h,null)}function U(){m(d,!l(d))}function E(){if(!l(h))return;const{card:p,idx:k}=l(h);if(r().turnState.hasMovedToCollection){m(c,"You can only move 1 card to collection per turn"),A();return}if(p.category>3){m(c,"Can only collect Art, Vehicles, or Garments (not Perishables or Debaucheries)"),A();return}const q=p.category,S=p.tier,T=k;Ee.updateState(M=>{const P=M.players.findIndex(z=>z.id===l(a)),I=M.players[P],G=I.hoard[T];return I.collectionCategory=q,I.hoard=I.hoard.filter((z,ne)=>ne!==T),I.collection=[...I.collection,G],M.turnState={...M.turnState,hasMovedToCollection:!0},M.players=M.players.map((z,ne)=>ne===P?{...z}:z),M}),m(u,null),m(c,`Added ${i[q]} T${S} to collection`),A()}function R(){if(!l(h))return;const{card:p,idx:k}=l(h);if(r().turnState.hasMovedToCollection){m(c,"You can only move 1 card to collection per turn"),A();return}if(p.category>3){m(c,"Can only collect Art, Vehicles, or Garments (not Perishables or Debaucheries)"),A();return}const q=p.category;p.tier;const S=k;Ee.updateState(T=>{const M=T.players.findIndex(G=>G.id===l(a)),P=T.players[M];P.collection.forEach(G=>{T.piles[G.tier].unshift(G)}),P.collection=[];const I=P.hoard[S];return P.collectionCategory=q,P.hoard=P.hoard.filter((G,z)=>z!==S),P.collection=[I],T.turnState={...T.turnState,hasMovedToCollection:!0},T.players=T.players.map((G,z)=>z===M?{...G}:G),T}),m(u,null),m(c,`Started new ${i[q]} collection (previous returned to piles)`),A()}let J=F(()=>l(o)?or(l(o)):{1:0,2:0,3:0,4:0}),X=F(()=>l(o)?l(o).collection.reduce((p,k)=>p+k.value,0):0),D=F(()=>r().turnState.hasDrawn||r().turnState.hasActed),x=F(()=>({1:l(o)?l(o).hoard.map((p,k)=>({card:p,idx:k})).filter(p=>p.card.tier===1):[],2:l(o)?l(o).hoard.map((p,k)=>({card:p,idx:k})).filter(p=>p.card.tier===2):[],3:l(o)?l(o).hoard.map((p,k)=>({card:p,idx:k})).filter(p=>p.card.tier===3):[],4:l(o)?l(o).hoard.map((p,k)=>({card:p,idx:k})).filter(p=>p.card.tier===4):[]})),B=F(()=>[1,2,3,4].filter(p=>l(x)[p].length>0)),j=F(()=>l(B).length>0?224+(l(B).length-1)*40:100),W=F(()=>l(o)?[...l(o).collection].sort((p,k)=>p.tier-k.tier):[]),K=F(()=>l(W).length>0?157+(l(W).length-1)*30:0);function w(){if(l(o).collection.length===0){m(c,"Collection is already empty");return}confirm(`Reset your ${i[l(o).collectionCategory]} collection? All cards will return to their piles.`)&&(Ee.updateState(p=>{const k=p.players.findIndex(S=>S.id===l(a)),q=p.players[k];return q.collection.forEach(S=>{p.piles[S.tier].unshift(S)}),q.collection=[],p.players=p.players.map((S,T)=>T===k?{...S}:S),p}),m(c,"Collection reset"))}function N(){if(!l(D)){m(c,"You must draw or play an action before ending your turn");return}Ee.updateState(p=>{const k=p.players.findIndex(T=>T.id===l(a)),q=p.players[k];return Fr(p.players,q.collectionCategory)===q.id&&(q.points+=1,q.pointsLog.push({reason:"Collection leader bonus",amount:1}),m(c,"End-of-turn: +1 for leading collection"),q.points>=15)?(p.gameEnded=!0,p.players=p.players.map((T,M)=>M===k?{...T}:T),alert(`You win with ${q.points} points!`),p):(p.currentPlayer=(p.currentPlayer+1)%p.players.length,m(u,null),p.currentPlayer!==l(a)-1&&p.track.length<10?L(p):(p.turnState={hasDrawn:!1,hasActed:!1,hasMovedToCollection:!1},m(c,"Your turn")),p.players=p.players.map((T,M)=>M===k?{...T}:T),p)})}function L(p){for(;p.currentPlayer!==l(a)-1&&p.track.length<10;){if(_l(p),p.track.length===10){const{winnerId:S,tie:T}=wn(p.players),M=p.players.map(P=>`Player ${P.id}: ${P.points} points`).join(", ");p.gameEnded=!0,T?(m(c,`Track complete! Tie game! ${M}`),alert(`Game Over!

Track is full!
${M}

It's a tie!`)):(m(c,`Track complete! Player ${S} wins!`),alert(`Game Over!

Track is full!
${M}

Player ${S} wins!`));return}const k=p.players[p.currentPlayer];if(Fr(p.players,k.collectionCategory)===k.id&&(k.points+=1,k.pointsLog.push({reason:"Collection leader bonus",amount:1}),k.points>=15)){p.gameEnded=!0,m(c,`Player ${k.id} wins with ${k.points} points!`),alert(`Game Over! Player ${k.id} wins with ${k.points} points!`);return}p.currentPlayer=(p.currentPlayer+1)%p.players.length}if(p.track.length===10){const{winnerId:k,tie:q}=wn(p.players),S=p.players.map(T=>`Player ${T.id}: ${T.points} points`).join(", ");p.gameEnded=!0,q?(m(c,`Track complete! Tie game! ${S}`),alert(`Game Over!

Track is full!
${S}

It's a tie!`)):(m(c,`Track complete! Player ${k} wins!`),alert(`Game Over!

Track is full!
${S}

Player ${k} wins!`));return}p.turnState={hasDrawn:!1,hasActed:!1,hasMovedToCollection:!1},m(c,"AI turns complete - Your turn")}var se=Ql(),he=le(se);{var $e=p=>{var k=Vl(),q=g(k),S=g(q),T=g(S),M=g(T),P=g(M),I=b(T,2);{var G=ge=>{var Ae=Ll(),It=g(Ae);Y(()=>Q(It,l(c))),y(ge,Ae)};H(I,ge=>{l(c)&&ge(G)})}var z=b(S,2),ne=g(z),ce=b(q,2),ie=g(ce),_e=g(ie);Il(_e,{});var be=b(ie,2),te=g(be),Z=g(te),pe=g(Z);{var xe=ge=>{var Ae=et();Y(()=>Q(Ae,`Prized Collection of ${i[l(o).collectionCategory]??""} — Value: ${l(X)??""}`)),y(ge,Ae)},Fe=ge=>{var Ae=et("Prized Collection (Empty)");y(ge,Ae)};H(pe,ge=>{l(o).collection.length>0?ge(xe):ge(Fe,!1)})}var Oe=b(Z,2),ke=g(Oe);{var ye=ge=>{var Ae=ql();V("click",Ae,w),y(ge,Ae)};H(ke,ge=>{l(o).collection.length>0&&ge(ye)})}var ve=b(Oe,2),Le=g(ve);{var Qe=ge=>{var Ae=Bl();y(ge,Ae)},lt=ge=>{var Ae=Ul();Ce(Ae,21,()=>l(W),we,(It,zt,Dt)=>{var wt=Fl();Ke(wt,`left: ${Dt*30}px; z-index: ${Dt};`),Y(()=>{oe(wt,"src",l(zt).id),oe(wt,"alt",`T${l(zt).tier??""}`)}),V("click",wt,()=>f(l(zt))),y(It,wt)}),Y(()=>Ke(Ae,`width: ${l(K)??""}px;`)),y(ge,Ae)};H(Le,ge=>{l(o).collection.length===0?ge(Qe):ge(lt,!1)})}var at=b(te,2),Je=g(at),cr=g(Je),Pr=b(Je,2),en=g(Pr);Ce(en,21,()=>l(B),we,(ge,Ae,It)=>{const zt=F(()=>161+(l(x)[l(Ae)].length-1)*20);var Dt=jl();Ce(Dt,21,()=>l(x)[l(Ae)],we,(wt,tn,rn)=>{let ur=()=>l(tn).card,nn=()=>l(tn).idx;var Ht=Gl();let sn;Ke(Ht,`left: ${rn*20}px; z-index: ${rn};`);var ln=g(Ht);Y(()=>{sn=ut(Ht,1,"card stacked svelte-35ipt4",null,sn,{selected:nn()===l(u)}),oe(ln,"src",ur().id),oe(ln,"alt",`${i[ur().category]??""} T${ur().tier??""}`)}),V("click",Ht,()=>C(ur(),nn())),y(wt,Ht)}),Y(()=>Ke(Dt,`width: ${l(zt)??""}px; top: ${It*40}px; z-index: ${It};`)),y(ge,Dt)}),Y(()=>{Q(P,`${l(o).points??""} points`),ne.disabled=!l(D),Q(cr,`Personal Hoard (T1:${l(J)[1]??""} T2:${l(J)[2]??""} T3:${l(J)[3]??""} T4:${l(J)[4]??""})`),Ke(en,`height: ${l(j)??""}px;`)}),V("click",M,U),V("click",ne,N),y(p,k)};H(he,p=>{l(o)&&p($e)})}var fe=b(he,2);{let p=F(()=>!!l(v)),k=F(()=>l(v)?.id);gs(fe,{get show(){return l(p)},get imageSrc(){return l(k)},$$events:{close:_}})}var O=b(fe,2);{var re=p=>{const k=F(()=>l(h).card),q=F(()=>l(k).category<=3),S=F(()=>l(o).collection.length>0),T=F(()=>l(S)&&l(k).category===l(o).collectionCategory);var M=Kl(),P=g(M),I=g(P),G=b(I,2);{var z=ce=>{var ie=Yl(),_e=b(le(ie),2),be=g(_e);V("click",be,A),y(ce,ie)},ne=ce=>{var ie=Te(),_e=le(ie);{var be=Z=>{var pe=zl(),xe=le(pe),Fe=b(g(xe)),Oe=g(Fe),ke=b(xe,2),ye=g(ke),ve=b(ye,2);Y(()=>Q(Oe,i[l(k).category])),V("click",ye,E),V("click",ve,A),y(Z,pe)},te=Z=>{var pe=Te(),xe=le(pe);{var Fe=ke=>{var ye=Hl(),ve=le(ye),Le=b(g(ve)),Qe=g(Le),lt=b(ve,2),at=g(lt),Je=b(at,2);Y(()=>Q(Qe,i[l(k).category])),V("click",at,E),V("click",Je,A),y(ke,ye)},Oe=ke=>{var ye=Wl(),ve=le(ye),Le=b(g(ve)),Qe=g(Le),lt=b(Le,2),at=g(lt),Je=b(ve,2),cr=g(Je),Pr=b(cr,2);Y(()=>{Q(Qe,i[l(k).category]),Q(at,i[l(o).collectionCategory])}),V("click",cr,R),V("click",Pr,A),y(ke,ye)};H(xe,ke=>{l(T)?ke(Fe):ke(Oe,!1)},!0)}y(Z,pe)};H(_e,Z=>{l(S)?Z(te,!1):Z(be)},!0)}y(ce,ie)};H(G,ce=>{l(q)?ce(ne,!1):ce(z)})}Y(()=>oe(I,"src",l(k).id)),V("click",P,mt(function(ce){yt.call(this,t,ce)})),V("click",M,A),y(p,M)};H(O,p=>{l(h)&&p(re)})}var ee=b(O,2);{let p=F(()=>l(o)?.points||0);ms(ee,{get show(){return l(d)},get player(){return l(o)},get title(){return`Your Points — ${l(p)??""} total`},$$events:{close:U}})}y(e,se),ze(),s()}var Zl=$('<div class="turn-summary svelte-v5y6g1"><!></div>'),Jl=$('<img class="mini-action svelte-v5y6g1"/>'),ea=$('<img class="mini-back svelte-v5y6g1"/>'),ta=$('<img class="mini-collection-card svelte-v5y6g1"/>'),ra=$('<div class="collection-stack svelte-v5y6g1"></div>'),na=$('<span class="empty svelte-v5y6g1">Empty</span>'),sa=$('<div class="mini-player svelte-v5y6g1"><div class="player-header svelte-v5y6g1"><span class="points-clickable svelte-v5y6g1"> </span></div> <!> <div class="action-cards svelte-v5y6g1"></div> <div class="hoard-backs svelte-v5y6g1"></div> <div class="collection-info svelte-v5y6g1"><strong class="svelte-v5y6g1"> </strong> <div class="collection-cards svelte-v5y6g1"><!></div></div></div>'),ia=$('<div class="players-overview svelte-v5y6g1"><h3 class="area-title svelte-v5y6g1">Opposing Players</h3> <div class="players-grid svelte-v5y6g1"></div></div> <!> <!>',1);function la(e,t){Ye(t,!0);const r=()=>$t(Ee,"$gameStore",n),[n,s]=Pt(),{CategoryNames:i,cardBacks:a,actionImages:o,ColorTints:u}=Ve;let c=F(()=>r().humanId),v=F(()=>r().players.filter(D=>D.id!==l(c))),h=ue(null),d=ue(null);function f(D){m(h,D,!0)}function _(){m(h,null)}function C(D){m(d,D,!0)}function A(){m(d,null)}var U=ia(),E=le(U),R=b(g(E),2);Ce(R,21,()=>l(v),we,(D,x)=>{const B=F(()=>or(l(x))),j=F(()=>l(x).collection.reduce((S,T)=>S+T.value,0));var W=sa(),K=g(W),w=g(K),N=g(w),L=b(K,2);{var se=S=>{var T=Zl(),M=g(T);$i(M,()=>l(x).lastTurnSummary),y(S,T)};H(L,S=>{l(x).lastTurnSummary&&S(se)})}var he=b(L,2);Ce(he,20,()=>["status","destruction","competitive","potlatch"],we,(S,T,M)=>{var P=Te(),I=le(P);{var G=z=>{var ne=Jl();Y(()=>{oe(ne,"src",o[l(x).id][M]),oe(ne,"alt",T)}),y(z,ne)};H(I,z=>{l(x).actionsUsed[T]||z(G)})}y(S,P)});var $e=b(he,2);Ce($e,20,()=>[1,2,3,4],we,(S,T)=>{var M=Te(),P=le(M);Ce(P,17,()=>Array(l(B)[T]),we,(I,G)=>{var z=ea();Y(()=>{oe(z,"src",a[T]),oe(z,"alt",`T${T??""}`)}),y(I,z)}),y(S,M)});var fe=b($e,2),O=g(fe),re=g(O),ee=b(O,2),p=g(ee);{var k=S=>{const T=F(()=>[...l(x).collection].sort((P,I)=>P.tier-I.tier));var M=ra();Ce(M,21,()=>l(T),we,(P,I,G)=>{var z=ta();Ke(z,`left: ${G*12}px; z-index: ${G};`),Y(()=>{oe(z,"src",l(I).id),oe(z,"alt",`T${l(I).tier??""}`)}),V("click",z,()=>f(l(I))),y(P,z)}),Y(()=>Ke(M,`width: ${40+(l(T).length-1)*12}px;`)),y(S,M)},q=S=>{var T=na();y(S,T)};H(p,S=>{l(x).collection.length>0?S(k):S(q,!1)})}Y(()=>{Ke(W,`background: ${u[l(x).color]??""};`),Q(N,`${l(x).points??""} pts`),Q(re,`${l(x).collectionCategory?"Prized Collection of "+i[l(x).collectionCategory]:"Prized Collection"} (Value: ${l(j)??""})`)}),V("click",w,()=>C(l(x))),y(D,W)});var J=b(E,2);{let D=F(()=>!!l(h)),x=F(()=>l(h)?.id);gs(J,{get show(){return l(D)},get imageSrc(){return l(x)},$$events:{close:_}})}var X=b(J,2);{let D=F(()=>!!l(d));ms(X,{get show(){return l(D)},get player(){return l(d)},$$events:{close:A}})}y(e,U),ze(),s()}var aa=$('<div class="game-board svelte-8w11tm"><div class="left-sidebar svelte-8w11tm"><!></div> <div class="main-area svelte-8w11tm"><!> <!> <!></div> <button class="reset-btn svelte-8w11tm">Return to Start Screen</button></div>');function oa(e,t){Ye(t,!1),ds();var r=aa(),n=g(r),s=g(n);nl(s,{});var i=b(n,2),a=g(i);la(a,{});var o=b(a,2);fl(o,{});var u=b(o,2);Xl(u,{});var c=b(i,2);V("click",c,()=>Ee.resetGame()),y(e,r),ze()}var ca=$('<main class="svelte-1n46o8q"><h1 class="svelte-1n46o8q">Potlatch Deluxe</h1> <!></main>');function ua(e,t){Ye(t,!1);const r=()=>$t(Ee,"$gameStore",n),[n,s]=Pt();ds();var i=ca(),a=b(g(i),2);{var o=c=>{zi(c,{})},u=c=>{oa(c,{})};H(a,c=>{r().gameStarted?c(u,!1):c(o)})}y(e,i),ze(),s()}ki(ua,{target:document.getElementById("app")});
